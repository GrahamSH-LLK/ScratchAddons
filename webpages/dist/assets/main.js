import{_ as fe,r as Lt,w as j,v as ee,o as p,c as v,a as l,t as k,b as et,d as We,e as js,f as An,g as Bs,h as zs,i as Us,j as $,u as $n,F as z,k as X,l as de,m as me,n as ye,p as U,q as Pt,s as we,x as as,y as tt,z as Ie,A as Ln,B as Hs,C as Ws,D as Vs,E as Gs}from"./icon-transparent.js";import{_ as _n}from"./popout.js";const Xs=(t,e)=>{const n=document.createElement("a");if(document.body.appendChild(n),navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(e,t);return}if("download"in HTMLAnchorElement.prototype){const s=window.URL.createObjectURL(e);n.href=s,n.download=t,n.type=e.type,n.click(),window.setTimeout(()=>{document.body.removeChild(n),window.URL.revokeObjectURL(s)},1e3)}else{let s=window.open("","_blank");const o=new FileReader;o.onloadend=function(){s.location.href=o.result,s=null},o.readAsDataURL(e)}};function Me(t){return Array.isArray?Array.isArray(t):cs(t)==="[object Array]"}function _e(t){return typeof t=="string"}function ls(t){return typeof t=="number"}function Ys(t){return t===!0||t===!1||function(e){return ds(e)&&e!==null}(t)&&cs(t)=="[object Boolean]"}function ds(t){return typeof t=="object"}function ce(t){return t!=null}function Ht(t){return!t.trim().length}function cs(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Pn=Object.prototype.hasOwnProperty;class Ks{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(s=>{let o=us(s);n+=o.weight,this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(s=>{s.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function us(t){let e=null,n=null,s=null,o=1,i=null;if(_e(t)||Me(t))s=t,e=Nn(t),n=un(t);else{if(!Pn.call(t,"name"))throw new Error((d=>`Missing ${d} property in key`)("name"));const r=t.name;if(s=r,Pn.call(t,"weight")&&(o=t.weight,o<=0))throw new Error((d=>`Property 'weight' in key '${d}' must be a positive integer`)(r));e=Nn(r),n=un(r),i=t.getFn}return{path:e,id:n,weight:o,src:s,getFn:i}}function Nn(t){return Me(t)?t:t.split(".")}function un(t){return Me(t)?t.join("."):t}var T={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(t,e){let n=[],s=!1;const o=(i,r,d)=>{if(ce(i))if(r[d]){const a=i[r[d]];if(!ce(a))return;if(d===r.length-1&&(_e(a)||ls(a)||Ys(a)))n.push(function(c){return c==null?"":function(m){if(typeof m=="string")return m;let h=m+"";return h=="0"&&1/m==-1/0?"-0":h}(c)}(a));else if(Me(a)){s=!0;for(let c=0,m=a.length;c<m;c+=1)o(a[c],r,d+1)}else r.length&&o(a,r,d+1)}else n.push(i)};return o(t,_e(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const qs=/[^ ]+/g;class xn{constructor({getFn:e=T.getFn,fieldNormWeight:n=T.fieldNormWeight}={}){this.norm=function(s=1,o=3){const i=new Map,r=Math.pow(10,o);return{get(d){const a=d.match(qs).length;if(i.has(a))return i.get(a);const c=1/Math.pow(a,.5*s),m=parseFloat(Math.round(c*r)/r);return i.set(a,m),m},clear(){i.clear()}}}(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,_e(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();_e(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!ce(e)||Ht(e))return;let s={v:e,i:n,n:this.norm.get(e)};this.records.push(s)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach((o,i)=>{let r=o.getFn?o.getFn(e):this.getFn(e,o.path);if(ce(r)){if(Me(r)){let d=[];const a=[{nestedArrIndex:-1,value:r}];for(;a.length;){const{nestedArrIndex:c,value:m}=a.pop();if(ce(m))if(_e(m)&&!Ht(m)){let h={v:m,i:c,n:this.norm.get(m)};d.push(h)}else Me(m)&&m.forEach((h,g)=>{a.push({nestedArrIndex:g,value:h})})}s.$[i]=d}else if(_e(r)&&!Ht(r)){let d={v:r,n:this.norm.get(r)};s.$[i]=d}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function hs(t,e,{getFn:n=T.getFn,fieldNormWeight:s=T.fieldNormWeight}={}){const o=new xn({getFn:n,fieldNormWeight:s});return o.setKeys(t.map(us)),o.setSources(e),o.create(),o}function ft(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:o=T.distance,ignoreLocation:i=T.ignoreLocation}={}){const r=e/t.length;if(i)return r;const d=Math.abs(s-n);return o?r+d/o:d?1:r}function Js(t,e,n,{location:s=T.location,distance:o=T.distance,threshold:i=T.threshold,findAllMatches:r=T.findAllMatches,minMatchCharLength:d=T.minMatchCharLength,includeMatches:a=T.includeMatches,ignoreLocation:c=T.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const m=e.length,h=t.length,g=Math.max(0,Math.min(s,h));let u=i,f=g;const b=d>1||a,E=b?Array(h):[];let w;for(;(w=t.indexOf(e,f))>-1;){let R=ft(e,{currentLocation:w,expectedLocation:g,distance:o,ignoreLocation:c});if(u=Math.min(R,u),f=w+m,b){let Y=0;for(;Y<m;)E[w+Y]=1,Y+=1}}f=-1;let I=[],O=1,L=m+h;const W=1<<m-1;for(let R=0;R<m;R+=1){let Y=0,B=L;for(;Y<B;)ft(e,{errors:R,currentLocation:g+B,expectedLocation:g,distance:o,ignoreLocation:c})<=u?Y=B:L=B,B=Math.floor((L-Y)/2+Y);L=B;let ne=Math.max(1,g-B+1),_=r?h:Math.min(g+B,h)+m,x=Array(_+2);x[_+1]=(1<<R)-1;for(let S=_;S>=ne;S-=1){let D=S-1,P=n[t.charAt(D)];if(b&&(E[D]=+!!P),x[S]=(x[S+1]<<1|1)&P,R&&(x[S]|=(I[S+1]|I[S])<<1|1|I[S+1]),x[S]&W&&(O=ft(e,{errors:R,currentLocation:D,expectedLocation:g,distance:o,ignoreLocation:c}),O<=u)){if(u=O,f=D,f<=g)break;ne=Math.max(1,2*g-f)}}if(ft(e,{errors:R+1,currentLocation:g,expectedLocation:g,distance:o,ignoreLocation:c})>u)break;I=x}const J={isMatch:f>=0,score:Math.max(.001,O)};if(b){const R=function(Y=[],B=T.minMatchCharLength){let ne=[],_=-1,x=-1,S=0;for(let D=Y.length;S<D;S+=1){let P=Y[S];P&&_===-1?_=S:P||_===-1||(x=S-1,x-_+1>=B&&ne.push([_,x]),_=-1)}return Y[S-1]&&S-_>=B&&ne.push([_,S-1]),ne}(E,d);R.length?a&&(J.indices=R):J.isMatch=!1}return J}function Zs(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const o=t.charAt(n);e[o]=(e[o]||0)|1<<s-n-1}return e}let gs=class{constructor(e,{location:n=T.location,threshold:s=T.threshold,distance:o=T.distance,includeMatches:i=T.includeMatches,findAllMatches:r=T.findAllMatches,minMatchCharLength:d=T.minMatchCharLength,isCaseSensitive:a=T.isCaseSensitive,ignoreLocation:c=T.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:d,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const m=(g,u)=>{this.chunks.push({pattern:g,alphabet:Zs(g),startIndex:u})},h=this.pattern.length;if(h>32){let g=0;const u=h%32,f=h-u;for(;g<f;)m(this.pattern.substr(g,32),g),g+=32;if(u){const b=h-32;m(this.pattern.substr(b),b)}}else m(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let f={isMatch:!0,score:0};return s&&(f.indices=[[0,e.length-1]]),f}const{location:o,distance:i,threshold:r,findAllMatches:d,minMatchCharLength:a,ignoreLocation:c}=this.options;let m=[],h=0,g=!1;this.chunks.forEach(({pattern:f,alphabet:b,startIndex:E})=>{const{isMatch:w,score:I,indices:O}=Js(e,f,b,{location:o+E,distance:i,threshold:r,findAllMatches:d,minMatchCharLength:a,includeMatches:s,ignoreLocation:c});w&&(g=!0),h+=I,w&&O&&(m=[...m,...O])});let u={isMatch:g,score:g?h/this.chunks.length:1};return g&&s&&(u.indices=m),u}},De=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Fn(e,this.multiRegex)}static isSingleMatch(e){return Fn(e,this.singleRegex)}search(){}};function Fn(t,e){const n=t.match(e);return n?n[1]:null}class ms extends De{constructor(e,{location:n=T.location,threshold:s=T.threshold,distance:o=T.distance,includeMatches:i=T.includeMatches,findAllMatches:r=T.findAllMatches,minMatchCharLength:d=T.minMatchCharLength,isCaseSensitive:a=T.isCaseSensitive,ignoreLocation:c=T.ignoreLocation}={}){super(e),this._bitapSearch=new gs(e,{location:n,threshold:s,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:d,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}let ps=class extends De{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n,s=0;const o=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+i,o.push([n,s-1]);const r=!!o.length;return{isMatch:r,score:r?0:1,indices:o}}};const hn=[class extends De{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},ps,class extends De{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends De{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends De{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends De{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends De{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=t.indexOf(this.pattern)===-1;return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},ms],Rn=hn.length,Qs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,eo=new Set([ms.type,ps.type]);let to=class{constructor(e,{isCaseSensitive:n=T.isCaseSensitive,includeMatches:s=T.includeMatches,minMatchCharLength:o=T.minMatchCharLength,ignoreLocation:i=T.ignoreLocation,findAllMatches:r=T.findAllMatches,location:d=T.location,threshold:a=T.threshold,distance:c=T.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:o,findAllMatches:r,ignoreLocation:i,location:d,threshold:a,distance:c},this.pattern=n?e:e.toLowerCase(),this.query=function(m,h={}){return m.split("|").map(g=>{let u=g.trim().split(Qs).filter(b=>b&&!!b.trim()),f=[];for(let b=0,E=u.length;b<E;b+=1){const w=u[b];let I=!1,O=-1;for(;!I&&++O<Rn;){const L=hn[O];let W=L.isMultiMatch(w);W&&(f.push(new L(W,h)),I=!0)}if(!I)for(O=-1;++O<Rn;){const L=hn[O];let W=L.isSingleMatch(w);if(W){f.push(new L(W,h));break}}}return f})}(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let i=0,r=[],d=0;for(let a=0,c=n.length;a<c;a+=1){const m=n[a];r.length=0,i=0;for(let h=0,g=m.length;h<g;h+=1){const u=m[h],{isMatch:f,indices:b,score:E}=u.search(e);if(!f){d=0,i=0,r.length=0;break}if(i+=1,d+=E,s){const w=u.constructor.type;eo.has(w)?r=[...r,...b]:r.push(b)}}if(i){let h={isMatch:!0,score:d/i};return s&&(h.indices=r),h}}return{isMatch:!1,score:1}}};const gn=[];function mn(t,e){for(let n=0,s=gn.length;n<s;n+=1){let o=gn[n];if(o.condition(t,e))return new o(t,e)}return new gs(t,e)}const Sn="$and",no="$or",jn="$path",so="$val",Wt=t=>!(!t[Sn]&&!t[no]),Bn=t=>({[Sn]:Object.keys(t).map(e=>({[e]:t[e]}))});function oo(t,e,{auto:n=!0}={}){const s=o=>{let i=Object.keys(o);const r=(a=>!!a[jn])(o);if(!r&&i.length>1&&!Wt(o))return s(Bn(o));if((a=>!Me(a)&&ds(a)&&!Wt(a))(o)){const a=r?o[jn]:i[0],c=r?o[so]:o[a];if(!_e(c))throw new Error((h=>`Invalid value for key ${h}`)(a));const m={keyId:un(a),pattern:c};return n&&(m.searcher=mn(c,e)),m}let d={children:[],operator:i[0]};return i.forEach(a=>{const c=o[a];Me(c)&&c.forEach(m=>{d.children.push(s(m))})}),d};return Wt(t)||(t=Bn(t)),s(t)}function io(t,e){const n=t.matches;e.matches=[],ce(n)&&n.forEach(s=>{if(!ce(s.indices)||!s.indices.length)return;const{indices:o,value:i}=s;let r={indices:o,value:i};s.key&&(r.key=s.key.src),s.idx>-1&&(r.refIndex=s.idx),e.matches.push(r)})}function ro(t,e){e.score=t.score}let nt=class{constructor(e,n={},s){this.options={...T,...n},this.options.useExtendedSearch,this._keyStore=new Ks(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof xn))throw new Error("Incorrect 'index' type");this._myIndex=n||hs(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ce(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let s=0,o=this._docs.length;s<o;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,o-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:s,includeScore:o,shouldSort:i,sortFn:r,ignoreFieldNorm:d}=this.options;let a=_e(e)?_e(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(c,{ignoreFieldNorm:m=T.ignoreFieldNorm}){c.forEach(h=>{let g=1;h.matches.forEach(({key:u,norm:f,score:b})=>{const E=u?u.weight:null;g*=Math.pow(b===0&&E?Number.EPSILON:b,(E||1)*(m?1:f))}),h.score=g})}(a,{ignoreFieldNorm:d}),i&&a.sort(r),ls(n)&&n>-1&&(a=a.slice(0,n)),function(c,m,{includeMatches:h=T.includeMatches,includeScore:g=T.includeScore}={}){const u=[];return h&&u.push(io),g&&u.push(ro),c.map(f=>{const{idx:b}=f,E={item:m[b],refIndex:b};return u.length&&u.forEach(w=>{w(f,E)}),E})}(a,this._docs,{includeMatches:s,includeScore:o})}_searchStringList(e){const n=mn(e,this.options),{records:s}=this._myIndex,o=[];return s.forEach(({v:i,i:r,n:d})=>{if(!ce(i))return;const{isMatch:a,score:c,indices:m}=n.searchIn(i);a&&o.push({item:i,idx:r,matches:[{score:c,value:i,norm:d,indices:m}]})}),o}_searchLogical(e){const n=oo(e,this.options),s=(d,a,c)=>{if(!d.children){const{keyId:h,searcher:g}=d,u=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(a,h),searcher:g});return u&&u.length?[{idx:c,item:a,matches:u}]:[]}const m=[];for(let h=0,g=d.children.length;h<g;h+=1){const u=d.children[h],f=s(u,a,c);if(f.length)m.push(...f);else if(d.operator===Sn)return[]}return m},o=this._myIndex.records,i={},r=[];return o.forEach(({$:d,i:a})=>{if(ce(d)){let c=s(n,d,a);c.length&&(i[a]||(i[a]={idx:a,item:d,matches:[]},r.push(i[a])),c.forEach(({matches:m})=>{i[a].matches.push(...m)}))}}),r}_searchObjectList(e){const n=mn(e,this.options),{keys:s,records:o}=this._myIndex,i=[];return o.forEach(({$:r,i:d})=>{if(!ce(r))return;let a=[];s.forEach((c,m)=>{a.push(...this._findMatches({key:c,value:r[m],searcher:n}))}),a.length&&i.push({idx:d,item:r,matches:a})}),i}_findMatches({key:e,value:n,searcher:s}){if(!ce(n))return[];let o=[];if(Me(n))n.forEach(({v:i,i:r,n:d})=>{if(!ce(i))return;const{isMatch:a,score:c,indices:m}=s.searchIn(i);a&&o.push({score:c,key:e,value:i,idx:r,norm:d,indices:m})});else{const{v:i,n:r}=n,{isMatch:d,score:a,indices:c}=s.searchIn(i);d&&o.push({score:a,key:e,value:i,norm:r,indices:c})}return o}};nt.version="6.6.2",nt.createIndex=hs,nt.parseIndex=function(t,{getFn:e=T.getFn,fieldNormWeight:n=T.fieldNormWeight}={}){const{keys:s,records:o}=t,i=new xn({getFn:e,fieldNormWeight:n});return i.setKeys(s),i.setIndexRecords(o),i},nt.config=T,function(...t){gn.push(...t)}(to);const zn=[{id:"recentlyUsed",name:chrome.i18n.getMessage("recentlyUsed"),addonIds:[],expanded:!0,iframeShow:!0,fullscreenShow:!1},{id:"runningOnTab",name:chrome.i18n.getMessage("runningOnThisPage"),addonIds:[],expanded:!0,iframeShow:!0,fullscreenShow:!1},{id:"_iframeSearch",name:"",addonIds:[],expanded:!0,iframeShow:!0,fullscreenShow:!1},{id:"featuredNew",name:chrome.i18n.getMessage("featuredNew"),addonIds:[],expanded:!0,iframeShow:!1,fullscreenShow:!0,customOrder:["new","updated"]},{id:"new",name:chrome.i18n.getMessage("newGroup"),addonIds:[],expanded:new URLSearchParams(window.location.search).get("source")==="updatenotif",iframeShow:!1,fullscreenShow:!0,customOrder:["new","updated"]},{id:"enabled",name:chrome.i18n.getMessage("enabled"),addonIds:[],expanded:!0,iframeShow:!0,fullscreenShow:!0},{id:"recommended",name:chrome.i18n.getMessage("recommended"),addonIds:[],expanded:!0,iframeShow:!1,fullscreenShow:!0},{id:"featured",name:chrome.i18n.getMessage("featured"),addonIds:[],expanded:!0,iframeShow:!1,fullscreenShow:!0},{id:"forums",name:chrome.i18n.getMessage("forums"),addonIds:[],expanded:!1,iframeShow:!1,fullscreenShow:!0},{id:"others",name:chrome.i18n.getMessage("others"),addonIds:[],expanded:!0,iframeShow:!1,fullscreenShow:!0},{id:"beta",name:chrome.i18n.getMessage("beta"),addonIds:[],expanded:!1,iframeShow:!1,fullscreenShow:!0}],ao=[{id:"all",icon:"list",name:chrome.i18n.getMessage("all")},{id:"editor",icon:"puzzle",name:chrome.i18n.getMessage("editorFeatures")},{id:"codeEditor",parent:"editor",icon:"code",name:chrome.i18n.getMessage("codeEditorFeatures")},{id:"costumeEditor",parent:"editor",icon:"brush2",name:chrome.i18n.getMessage("costumeEditorFeatures")},{id:"projectPlayer",parent:"editor",icon:"player",name:chrome.i18n.getMessage("projectPlayerFeatures")},{id:"editorOthers",parent:"editor",icon:"dots",name:chrome.i18n.getMessage("others")},{id:"community",icon:"web",name:chrome.i18n.getMessage("websiteFeatures")},{id:"projectPage",parent:"community",icon:"projectpage",name:chrome.i18n.getMessage("projectPageFeatures")},{id:"profiles",parent:"community",icon:"users",name:chrome.i18n.getMessage("profilesFeatures")},{id:"forums",parent:"community",icon:"forum",name:chrome.i18n.getMessage("forums")},{id:"communityOthers",parent:"community",icon:"dots",name:chrome.i18n.getMessage("others")},{id:"theme",icon:"brush",name:chrome.i18n.getMessage("themes")},{id:"themesForEditor",parent:"theme",icon:"puzzle",name:chrome.i18n.getMessage("editorThemes")},{id:"themesForWebsite",parent:"theme",icon:"web",name:chrome.i18n.getMessage("websiteThemes")},{id:"popup",icon:"popup",name:chrome.i18n.getMessage("popupFeatures"),marginBottom:!0}],lo={name:"",description:"",tags:[],_categories:["editor"],_icon:"editor",_displayedAddonId:"",_enabled:!0,_addonId:"example",_groups:["enabled"]},fs=[{name:"danger",tooltipText:"dangerTooltip",matchName:"danger",color:"darkred",iframeAlwaysShow:!0},{name:"recommended",tooltipText:"recommendedTooltip",matchName:"recommended",color:"blue"},{name:"new",matchName:"new",color:"purple"},{name:"updated",matchName:"updated",color:"purple"},{name:"updatedWithSettings",matchName:"updatedWithSettings",color:"purple"},{name:"beta",tooltipText:"betaTooltip",matchName:"beta",color:"red",iframeAlwaysShow:!0},{name:"forums",tooltipText:"forumsTooltip",matchName:"forums",color:"green"},{name:"forEditor",matchName:"editor",color:"darkgreen",addonTabShow:{theme:!0}},{name:"forWebsite",matchName:"community",color:"yellow",addonTabShow:{theme:!0}}],co={includeScore:!0,threshold:.35,ignoreLocation:!0,useExtendedSearch:!0,keys:[{name:"name",weight:1},{name:"_addonId",weight:1},{name:"description",weight:.5},{name:"_english.name",weight:.8},{name:"_english.description",weight:.3},{name:"credits.name",weight:.2},{name:"info.text",weight:.1}]},Un=[];function uo(t){const e=t.split("-")[0];return Un.includes(t)||Un.includes(e)?"rtl":"ltr"}function ho(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kn={exports:{}};function En(){}En.prototype={on:function(t,e,n){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var s=this;function o(){s.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),s=0,o=n.length;for(s;s<o;s++)n[s].fn.apply(n[s].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),s=n[t],o=[];if(s&&e)for(var i=0,r=s.length;i<r;i++)s[i].fn!==e&&s[i].fn._!==e&&o.push(s[i]);return o.length?n[t]=o:delete n[t],this}};kn.exports=En;kn.exports.TinyEmitter=En;var go=kn.exports,mo=go,po=new mo;const vt=ho(po),Pe={$on:(...t)=>vt.on(...t),$once:(...t)=>vt.once(...t),$off:(...t)=>vt.off(...t),$emit:(...t)=>vt.emit(...t)},fo=(t,e)=>new Promise(n=>{chrome.tabs.query({currentWindow:!0,active:!0},s=>{s[0].id&&chrome.tabs.sendMessage(s[0].id,"getRunningAddons",{frameId:0},o=>{chrome.runtime.lastError;const i=o?[...o.userscripts,...o.userstyles]:[],r=o?o.disabledDynamicAddons:[];n({addonsCurrentlyOnTab:i,addonsPreviouslyOnTab:r})})})}),It=t=>(...e)=>new Promise(n=>t(...e,n)),vo=["notifications"],bo=async(t,e,n)=>{const s=JSON.parse(t),o=It(chrome.storage.sync.get.bind(chrome.storage.sync)),i=It(chrome.storage.sync.set.bind(chrome.storage.sync)),{addonsEnabled:r,...d}=await o(["addonSettings1","addonSettings2","addonSettings3","addonsEnabled"]),a={...d.addonSettings1,...d.addonSettings2,...d.addonSettings3},c={};for(const g of Object.keys(s.addons)){const u=s.addons[g],f=e.find(w=>w._addonId===g);if(!f)continue;const E=(f.permissions||[]).filter(w=>vo.includes(w));u.enabled&&E.length?c[g]=E:r[g]=u.enabled,a[g]=Object.assign({},a[g]),delete a[g]._version,Object.assign(a[g],u.settings)}handleConfirmClicked&&n.removeEventListener("click",handleConfirmClicked,{once:!0});let m=null;const h=new Promise(g=>{m=g});return handleConfirmClicked=async()=>{if(handleConfirmClicked=null,Object.keys(c).length){const u=await It(chrome.permissions.request.bind(chrome.permissions))({permissions:Object.values(c).flat()});Object.keys(c).forEach(f=>{r[f]=u})}const g=chrome.runtime.getManifest().version_name.endsWith("-prerelease");await i({globalTheme:!!s.core.lightTheme,addonsEnabled:r,...minifySettings(a,g?null:e)}),m()},n.classList.remove("hidden-button"),n.addEventListener("click",handleConfirmClicked,{once:!0}),h},Hn=async()=>{const e=await It(chrome.storage.sync.get.bind(chrome.storage.sync))(["globalTheme","addonSettings1","addonSettings2","addonSettings3","addonsEnabled"]),n={...e.addonSettings1,...e.addonSettings2,...e.addonSettings3},s={core:{lightTheme:e.globalTheme,version:chrome.runtime.getManifest().version_name},addons:{}};for(const o of Object.keys(e.addonsEnabled))s.addons[o]={enabled:e.addonsEnabled[o],settings:n[o]||{}};return JSON.stringify(s)},vs="/webpages/dist/assets/close.svg";const yo={props:["modelValue","title"],data(){return{canCloseOutside:!1}},watch:{modelValue(t){t?setTimeout(()=>{this.canCloseOutside=!0},100):this.canCloseOutside=!1}},computed:{isOpen:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{msg(...t){return this.$root.msg(...t)},clickOutside(t){this.isOpen&&this.canCloseOutside&&t.isTrusted&&(this.isOpen=!1)}}},wo={class:"modal"},_o={class:"modal-content"},xo=["title"];function So(t,e,n,s,o,i){const r=Lt("click-outside");return j((p(),v("div",wo,[j((p(),v("div",_o,[l("div",null,[l("img",{onClick:e[0]||(e[0]=d=>i.isOpen=!1),class:"close",title:i.msg("close"),src:vs},null,8,xo),l("h1",null,k(n.title),1)]),et(t.$slots,"default")])),[[r,i.clickOutside]])],512)),[[ee,i.isOpen]])}const ko=fe(yo,[["render",So]]);function je(t,e,n){return Math.max(e,Math.min(t,n))}function oe(t,e=2){return t.toFixed(e).replace(/\.?0+$/,"")}function Wn(t){return t.endsWith(".")?NaN:(parseFloat(t)%360+360)%360/360}function Vn(t){return oe(360*t)}function Ye(t){if(!t.endsWith("%"))return NaN;const e=t.substring(0,t.length-1);if(e.endsWith("."))return NaN;const n=parseFloat(e);return Number.isNaN(n)?NaN:je(n,0,100)/100}function bt(t){return oe(100*t)+"%"}function Vt(t){if(t.endsWith("%"))return Ye(t);if(t.endsWith("."))return NaN;const e=parseFloat(t);return Number.isNaN(e)?NaN:je(e,0,255)/255}function Gt(t){return oe(255*t)}function Xt(t){return t.endsWith("%")?Ye(t):je(parseFloat(t),0,1)}function Yt(t){return String(t)}const pn={hsl:{h:{to:Vn,from:Wn},s:{to:bt,from:Ye},l:{to:bt,from:Ye},a:{to:Yt,from:Xt}},hwb:{h:{to:Vn,from:Wn},w:{to:bt,from:Ye},b:{to:bt,from:Ye},a:{to:Yt,from:Xt}},rgb:{r:{to:Gt,from:Vt},g:{to:Gt,from:Vt},b:{to:Gt,from:Vt},a:{to:Yt,from:Xt}}};function yt(t){const e=t.replace(/^#/,""),n=[],s=e.length>4?2:1;for(let i=0;i<e.length;i+=s){const r=e.slice(i,i+s);n.push(r.repeat(s%2+1))}n.length===3&&n.push("ff");const o=n.map(i=>parseInt(i,16)/255);return{r:o[0],g:o[1],b:o[2],a:o[3]}}function Kt(t){const e=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,n=2*t.l-e;return{r:qt(n,e,t.h+1/3),g:qt(n,e,t.h),b:qt(n,e,t.h-1/3),a:t.a}}function qt(t,e,n){return n<0?n+=1:n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ze(t){return{r:Jt(5,t),g:Jt(3,t),b:Jt(1,t),a:t.a}}function Jt(t,e){const n=(t+6*e.h)%6;return e.v-e.v*e.s*Math.max(0,Math.min(n,4-n,1))}function ze(t){return{h:t.h,s:t.b===1?0:1-t.w/(1-t.b),v:1-t.b,a:t.a}}function Ve(t){const e=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b);let s;return s=n===e?0:n===t.r?(0+(t.g-t.b)/(n-e))/6:n===t.g?(2+(t.b-t.r)/(n-e))/6:(4+(t.r-t.g)/(n-e))/6,s<0&&(s+=1),{h:s,w:e,b:1-n,a:t.a}}function Zt(t){const e=Ve(t),n=e.w,s=1-e.b,o=(s+n)/2;let i;return i=s===0||n===1?0:(s-o)/Math.min(o,1-o),{h:e.h,s:i,l:o,a:t.a}}function wt(t){return"#"+Object.values(t).map(e=>{const n=255*e,s=Math.round(n).toString(16);return s.length===1?"0"+s:s}).join("")}const Eo={hex:[["hsl",t=>ve(t,[yt,Zt])],["hsv",t=>ve(t,[yt,Ve,ze])],["hwb",t=>ve(t,[yt,Ve])],["rgb",yt]],hsl:[["hex",t=>ve(t,[Kt,wt])],["hsv",function(t){const e=t.l+t.s*Math.min(t.l,1-t.l),n=e===0?0:2-2*t.l/e;return{h:t.h,s:n,v:e,a:t.a}}],["hwb",t=>ve(t,[Kt,Ve])],["rgb",Kt]],hsv:[["hex",t=>ve(t,[Ze,wt])],["hsl",function(t){const e=t.v-t.v*t.s/2,n=Math.min(e,1-e),s=n===0?0:(t.v-e)/n;return{h:t.h,s,l:e,a:t.a}}],["hwb",function(t){return{h:t.h,w:(1-t.s)*t.v,b:1-t.v,a:t.a}}],["rgb",Ze]],hwb:[["hex",t=>ve(t,[ze,Ze,wt])],["hsl",t=>ve(t,[ze,Ze,Zt])],["hsv",ze],["rgb",t=>ve(t,[ze,Ze])]],rgb:[["hex",wt],["hsl",Zt],["hsv",t=>ve(t,[Ve,ze])],["hwb",Ve]]};function ve(t,e){return e.reduce((n,s)=>s(n),t)}function _t(t){const e={};for(const n in t)e[n]=t[n];return e}const Mo={hex:(t,e)=>e&&[5,9].includes(t.length)?t.substring(0,t.length-(t.length-1)/4):t,hsl:(t,e)=>`hsl(${oe(360*t.h)} ${oe(100*t.s)}% ${oe(100*t.l)}%`+(e?")":` / ${oe(t.a)})`),hwb:(t,e)=>`hwb(${oe(360*t.h)} ${oe(100*t.w)}% ${oe(100*t.b)}%`+(e?")":` / ${oe(t.a)})`),rgb:(t,e)=>`rgb(${oe(255*t.r)} ${oe(255*t.g)} ${oe(255*t.b)}`+(e?")":` / ${oe(t.a)})`)};function Gn(t,e,n){return Mo[e](t,n)}function bs(t){return/^#(?:(?:[A-F0-9]{2}){3,4}|[A-F0-9]{3,4})$/i.test(t)}function Co(t){if(typeof t!="string")return{format:function(a){return Object.prototype.hasOwnProperty.call(a,"r")?"rgb":Object.prototype.hasOwnProperty.call(a,"w")?"hwb":Object.prototype.hasOwnProperty.call(a,"v")?"hsv":"hsl"}(t),color:t};if(bs(t))return{format:"hex",color:t};if(!t.includes("(")){const d=document.createElement("canvas").getContext("2d");d.fillStyle=t;const a=d.fillStyle;return a==="#000000"&&t!=="black"?null:{format:"hex",color:a}}const[e,n]=t.split("("),s=e.substring(0,3),o=n.replace(/[,/)]/g," ").replace(/\s+/g," ").trim().split(" ");o.length===3&&o.push("1");const i=(s+"a").split(""),r=Object.fromEntries(i.map((d,a)=>[d,pn[s][d].from(o[a])]));return{format:s,color:r}}const Qt=["hex","hsl","hwb","rgb"],Io=["show","hide"],To={class:"vacp-range-input-group"},Oo=["for"],Do={class:"vacp-range-input-label-text vacp-range-input-label-text--hue"},Ao=["id","value"],$o=["for"],Lo={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},Po=["id","value"],No=l("span",{class:"vacp-visually-hidden"},"Copy color",-1),Fo=l("svg",{class:"vacp-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 32 32"},[l("path",{d:"M25.313 28v-18.688h-14.625v18.688h14.625zM25.313 6.688c1.438 0 2.688 1.188 2.688 2.625v18.688c0 1.438-1.25 2.688-2.688 2.688h-14.625c-1.438 0-2.688-1.25-2.688-2.688v-18.688c0-1.438 1.25-2.625 2.688-2.625h14.625zM21.313 1.313v2.688h-16v18.688h-2.625v-18.688c0-1.438 1.188-2.688 2.625-2.688h16z",fill:"currentColor"})],-1),Ro={class:"vacp-color-inputs"},jo={class:"vacp-color-input-group"},Bo=["for"],zo=l("span",{class:"vacp-color-input-label-text"}," Hex ",-1),Uo=["id","value"],Ho=["id","for","onInput"],Wo={class:"vacp-color-input-label-text"},Vo=["id","value","onInput"],Go=l("span",{class:"vacp-visually-hidden"},"Switch format",-1),Xo=l("svg",{class:"vacp-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[l("path",{d:"M8 15l5-5-1-1-4 2-4-2-1 1zm4-9l1-1-5-5-5 5 1 1 4-2z",fill:"currentColor"})],-1);var ys={__name:"ColorPicker",props:{color:{type:[String,Object],default:"#ffffffff"},id:{type:String,default:"color-picker"},visibleFormats:{type:Array,default:()=>Qt,validator:t=>t.length>0&&t.every(e=>Qt.includes(e))},defaultFormat:{type:String,default:"hsl",validator:t=>Qt.includes(t)},alphaChannel:{type:String,default:"show",validator:t=>Io.includes(t)}},emits:["color-change"],setup(t,{emit:e}){const n=t,s=We(null),o=We(null),i=We(null),r=We(!1),d=We(n.visibleFormats.includes(n.defaultFormat)?n.defaultFormat:n.visibleFormats[0]),a=js({hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}),c=An(function(){const _=Object.keys(a[d.value]);return d.value!=="hex"&&n.alphaChannel==="hide"?_.slice(0,3):_}),m=An(function(){return n.alphaChannel==="hide"&&[5,9].includes(a.hex.length)?a.hex.substring(0,a.hex.length-(a.hex.length-1)/4):a.hex});function h(){const _=(n.visibleFormats.findIndex(x=>x===d.value)+1)%n.visibleFormats.length;d.value=n.visibleFormats[_]}function g(_){r.value=!0,b(_)}function u(_){r.value=!0,E(_)}function f(){r.value=!1}function b(_){_.buttons===1&&r.value!==!1&&o.value instanceof HTMLElement&&w(o.value,_.clientX,_.clientY)}function E(_){if(r.value===!1||!(o.value instanceof HTMLElement))return;_.preventDefault();const x=_.touches[0];w(o.value,x.clientX,x.clientY)}function w(_,x,S){const D=function(K,Oe,ke){const Be=K.getBoundingClientRect(),Dn=Oe-Be.left,pt=ke-Be.top;return{x:je(Dn/Be.width,0,1),y:je(1-pt/Be.height,0,1)}}(_,x,S),P=_t(a.hsv);P.s=D.x,P.v=D.y,R("hsv",P)}function I(_){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(_.key))return;_.preventDefault();const x=["ArrowLeft","ArrowDown"].includes(_.key)?-1:1,S=["ArrowLeft","ArrowRight"].includes(_.key)?"s":"v",D=_.shiftKey?10:1,P=a.hsv[S]+x*D*.01,K=_t(a.hsv);K[S]=je(P,0,1),R("hsv",K)}function O(_){const x=Co(_);x!==null&&R(x.format,x.color)}function L(_,x){const S=_.currentTarget,D=_t(a.hsv);D[x]=parseInt(S.value)/parseInt(S.max),R("hsv",D)}function W(_){const x=_.target;bs(x.value)&&R("hex",x.value)}function J(_,x){const S=_.target,D=_t(a[d.value]),P=pn[d.value][x].from(S.value);Number.isNaN(P)||P===void 0||(D[x]=P,R(d.value,D))}function R(_,x){let S=x;if(n.alphaChannel==="hide")if(typeof x!="string")x.a=1,S=x;else if([5,9].includes(x.length)){const D=(x.length-1)/4;S=x.substring(0,x.length-D)+"f".repeat(D)}else[4,7].includes(x.length)&&(S=x+"f".repeat((x.length-1)/3));if(!function(D,P){if(typeof D=="string"||typeof P=="string")return D===P;for(const K in D)if(D[K]!==P[K])return!1;return!0}(a[_],S)){(function(P,K){a[P]=K;for(const[Oe,ke]of Eo[P])a[Oe]=ke(a[P])})(_,S);const D=function(){const P=n.alphaChannel==="hide",K=Gn(a[d.value],d.value,P);return{colors:a,cssColor:K}}();e("color-change",D)}(function(){s.value instanceof HTMLElement&&o.value instanceof HTMLElement&&i.value instanceof HTMLElement&&(s.value.style.setProperty("--vacp-hsl-h",String(a.hsl.h)),s.value.style.setProperty("--vacp-hsl-s",String(a.hsl.s)),s.value.style.setProperty("--vacp-hsl-l",String(a.hsl.l)),s.value.style.setProperty("--vacp-hsl-a",String(a.hsl.a)),o.value.style.position="relative",o.value.style.backgroundColor="hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%)",o.value.style.backgroundImage="linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)",i.value.style.boxSizing="border-box",i.value.style.position="absolute",i.value.style.left=100*a.hsv.s+"%",i.value.style.bottom=100*a.hsv.v+"%")})()}async function Y(){const _=a[d.value],x=n.alphaChannel==="hide",S=Gn(_,d.value,x);await window.navigator.clipboard.writeText(S)}function B(_,x){return pn[_][x].to(a[_][x])}function ne(_){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(_.key)||!_.shiftKey)return;const x=_.currentTarget,S=parseFloat(x.step),D=["ArrowLeft","ArrowDown"].includes(_.key)?-1:1,P=je(parseFloat(x.value)+D*S*10,parseInt(x.min),parseInt(x.max));x.value=String(P-D*S)}return Bs(()=>n.color,O),zs(function(){document.addEventListener("mousemove",b,{passive:!1}),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("mouseup",f),document.addEventListener("touchend",f),O(n.color)}),Us(function(){document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",E),document.removeEventListener("mouseup",f),document.removeEventListener("touchend",f)}),(_,x)=>(p(),v("div",{ref_key:"colorPicker",ref:s,class:"vacp-color-picker"},[l("div",{ref_key:"colorSpace",ref:o,class:"vacp-color-space",onMousedown:g,onTouchstart:u},[l("div",{ref_key:"thumb",ref:i,class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:I},null,544)],544),l("div",To,[l("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${t.id}-hue-slider`},[l("span",Do,[et(_.$slots,"hue-range-input-label",{},()=>[de("Hue")])]),l("input",{id:`${t.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:360*a.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:ne,onInput:x[0]||(x[0]=S=>L(S,"h"))},null,40,Ao)],8,Oo),t.alphaChannel==="show"?(p(),v("label",{key:0,class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${t.id}-alpha-slider`},[l("span",Lo,[et(_.$slots,"alpha-range-input-label",{},()=>[de("Alpha")])]),l("input",{id:`${t.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:100*a.hsv.a,type:"range",min:"0",max:"100",step:"1",onKeydownPassive:ne,onInput:x[1]||(x[1]=S=>L(S,"a"))},null,40,Po)],8,$o)):$("v-if",!0)]),l("button",{class:"vacp-copy-button",type:"button",onClick:Y},[et(_.$slots,"copy-button",{},()=>[No,Fo])]),l("div",Ro,[l("div",jo,[d.value==="hex"?(p(),v("label",{key:0,class:"vacp-color-input-label",for:`${t.id}-color-hex`},[zo,l("input",{id:`${t.id}-color-hex`,class:"vacp-color-input",type:"text",value:$n(m),onInput:W},null,40,Uo)],8,Bo)):(p(!0),v(z,{key:1},X($n(c),S=>(p(),v("label",{id:`${t.id}-color-${d.value}-${S}-label`,key:`${t.id}-color-${d.value}-${S}-label`,class:"vacp-color-input-label",for:`${t.id}-color-${d.value}-${S}`,onInput:D=>J(D,S)},[l("span",Wo,k(S.toUpperCase()),1),l("input",{id:`${t.id}-color-${d.value}-${S}`,class:"vacp-color-input",type:"text",value:B(d.value,S),onInput:D=>J(D,S)},null,40,Vo)],40,Ho))),128))]),t.visibleFormats.length>1?(p(),v("button",{key:0,class:"vacp-format-switch-button",type:"button",onClick:h},[et(_.$slots,"format-switch-button",{},()=>[Go,Xo])])):$("v-if",!0)])],512))}};(function(t,e){e===void 0&&(e={});var n=e.insertAt;if(t&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}})(".vacp-color-picker{--vacp-color:hsl(calc(var(--vacp-hsl-h)*360) calc(var(--vacp-hsl-s)*100%) calc(var(--vacp-hsl-l)*100%)/var(--vacp-hsl-a));--vacp-focus-color:#19f;--vacp-focus-outline:2px solid var(--vacp-focus-color);--vacp-border-width:1px;--vacp-border-color:#000;--vacp-border:var(--vacp-border-width) solid var(--vacp-border-color);--vacp-color-space-width:300px;--vacp-spacing:6px;grid-gap:var(--vacp-spacing);background-color:#fff;display:grid;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:.8em;grid-template-columns:1fr min-content;max-width:var(--vacp-color-space-width);padding:var(--vacp-spacing)}.vacp-color-picker *,.vacp-color-picker :after,.vacp-color-picker :before{box-sizing:border-box}.vacp-color-picker button::-moz-focus-inner{border:none;padding:0}.vacp-color-picker :focus{outline:var(--vacp-focus-outline)}.vacp-color-space{grid-column:1/-1;height:calc(var(--vacp-color-space-width)*.6);overflow:hidden}.vacp-color-space-thumb{--vacp-thumb-size:calc(var(--vacp-spacing)*4);border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);height:var(--vacp-thumb-size);margin-bottom:calc(var(--vacp-thumb-size)*-1/2);margin-left:calc(var(--vacp-thumb-size)*-1/2);width:var(--vacp-thumb-size)}.vacp-color-space-thumb:focus{box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color),0 0 0 3px var(--vacp-focus-color);outline-color:transparent}.vacp-range-input-label{--vacp-slider-track-width:100%;--vacp-slider-track-height:calc(var(--vacp-spacing)*3);display:block}.vacp-range-input-group{display:flex;flex-direction:column;justify-content:center}.vacp-range-input-group>:not(:first-child){margin-top:var(--vacp-spacing)}.vacp-range-input,.vacp-range-input::-webkit-slider-thumb{-webkit-appearance:none}.vacp-range-input{background:none;border:none;display:block;height:var(--vacp-slider-track-height);margin-bottom:calc(var(--vacp-spacing)/2 + 1px);margin-left:0;margin-right:0;margin-top:calc(var(--vacp-spacing)/2 + 1px);padding:0;width:var(--vacp-slider-track-width)}.vacp-range-input:focus{outline:none}.vacp-range-input::-moz-focus-outer{border:none}.vacp-range-input--alpha{background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-position:0 0,var(--vacp-spacing) var(--vacp-spacing);background-size:calc(var(--vacp-spacing)*2) calc(var(--vacp-spacing)*2)}.vacp-range-input::-moz-range-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-webkit-slider-runnable-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input::-ms-track{border:var(--vacp-border);box-sizing:content-box;height:var(--vacp-slider-track-height);width:var(--vacp-slider-track-width)}.vacp-range-input:focus::-moz-range-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-webkit-slider-runnable-track{outline:var(--vacp-focus-outline)}.vacp-range-input:focus::-ms-track{outline:var(--vacp-focus-outline)}.vacp-range-input--alpha::-moz-range-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-webkit-slider-runnable-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--alpha::-ms-track{background-image:linear-gradient(to right,transparent,var(--vacp-color))}.vacp-range-input--hue::-moz-range-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-webkit-slider-runnable-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input--hue::-ms-track{background-image:linear-gradient(90deg,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#f0f 83.33333%,red 100%)}.vacp-range-input::-moz-range-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;width:var(--vacp-slider-track-height)}.vacp-range-input::-webkit-slider-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-range-input::-ms-thumb{background-color:transparent;border:3px solid #fff;border-radius:50%;box-shadow:0 0 0 var(--vacp-border-width) var(--vacp-border-color);box-sizing:content-box;height:var(--vacp-slider-track-height);isolation:isolate;margin-top:calc((var(--vacp-spacing)/2)*-1);width:var(--vacp-slider-track-height)}.vacp-copy-button{align-items:center;align-self:center;background-color:#fff;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;height:calc(var(--vacp-spacing)*6);justify-content:center;justify-self:center;overflow:hidden;position:relative;width:calc(var(--vacp-spacing)*6)}.vacp-copy-button:enabled:focus{border-color:var(--vacp-border-color);box-shadow:0 0 0 2px var(--vacp-focus-color);outline:none}.vacp-copy-button:enabled:hover{background-color:#0002}.vacp-color-inputs{align-items:center;display:flex;grid-column:1/-1}.vacp-color-inputs>:not(:first-child){margin-left:var(--vacp-spacing)}.vacp-color-input-group{column-gap:var(--vacp-spacing);display:grid;flex-grow:1;grid-auto-flow:column}.vacp-color-input-label{text-align:center}.vacp-color-input{border:var(--vacp-border);margin:0;margin-top:calc(var(--vacp-spacing)/2);text-align:center;width:100%}.vacp-color-input,.vacp-format-switch-button{background-color:#fff;color:inherit;font:inherit;padding:var(--vacp-spacing)}.vacp-format-switch-button{align-items:center;border:var(--vacp-border-width) solid transparent;border-radius:50%;display:flex;justify-content:center;margin:0}.vacp-format-switch-button:enabled:focus{border-color:var(--vacp-border-color)}.vacp-format-switch-button:enabled:hover{background-color:#0002}.vacp-visually-hidden{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}"),ys.__file="src/ColorPicker.vue";function Yo(t,e,n){var s,o,i,r,d;e==null&&(e=100);function a(){var m=Date.now()-r;m<e&&m>=0?s=setTimeout(a,e-m):(s=null,n||(d=t.apply(i,o),i=o=null))}var c=function(){i=this,o=arguments,r=Date.now();var m=n&&!s;return s||(s=setTimeout(a,e)),m&&(d=t.apply(i,o),i=o=null),d};return c.clear=function(){s&&(clearTimeout(s),s=null)},c.flush=function(){s&&(d=t.apply(i,o),i=o=null,clearTimeout(s),s=null)},c}const Ko={components:{ColorPicker:ys},props:["addon","setting","modelValue","alphaEnabled"],emits:["update:modelValue"],data(){return{isOpen:!1,canCloseOutside:!1}},computed:{color:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},mounted(){Pe.$on("close-pickers",t=>{if(this.isOpen&&this!==t){const e=this.$parent.addon,n=this.$parent.setting;this.toggle(e,n,!1,{callCloseDropdowns:!1,callClosePickers:!1})}})},methods:{toggle(t,e,n=!this.isOpen,{callCloseDropdowns:s=!0,callClosePickers:o=!0}={}){this.isOpen=n,this.opening=!0,o&&this.$root.closePickers({isTrusted:!0},this,{callCloseDropdowns:!1}),s&&this.$root.closeResetDropdowns({isTrusted:!0}),this.opening=!1,this.$parent.addonSettings[e.id]=this.color,this.$parent.updateSettings(t,{wait:250,settingId:e.id}),this.canCloseOutside=!1,setTimeout(()=>{this.canCloseOutside=!0},0)},change:Yo(function(t){const e=t.colors.hex;this.$parent.addonSettings[this.setting.id]=e,this.$parent.updateSettings(this.addon,{wait:250,settingId:this.setting.id}),this.color=e},250)}};function qo(t,e,n,s,o,i){const r=me("ColorPicker");return p(),v("div",{class:"color-container",key:t.value},[l("button",{style:ye({"background-color":i.color}),class:U(["setting-input color",{"action-disabled":!n.addon._enabled,open:o.isOpen}]),onClick:e[0]||(e[0]=d=>i.toggle(n.addon,n.setting))},null,6),j(Pt(r,{color:i.color,"alpha-channel":n.alphaEnabled?"show":"hide",id:"picker",dir:"ltr",onColorChange:i.change},null,8,["color","alpha-channel","onColorChange"]),[[ee,o.isOpen]])])}const Jo=fe(Ko,[["render",qo]]),zt="/webpages/dist/assets/expand.svg",Zo={props:["enabled","setting","presets"],data(){return{isResetDropdown:!0,isOpen:!1}},mounted(){Pe.$on("close-reset-dropdowns",t=>{this.isOpen&&this.setting.id!==t&&(this.isOpen=!1)})},methods:{toggle(){this.isOpen=!this.isOpen,this.$root.closePickers({isTrusted:!0},null,{callCloseDropdowns:!1}),this.$root.closeResetDropdowns({isTrusted:!0},this.setting.id)},resetToDefault(){this.$parent.addonSettings[this.setting.id]=this.setting.default,this.$parent.updateSettings(this.addon,{settingId:this.setting.id}),this.toggle()},resetToPreset(t){this.$parent.addonSettings[this.setting.id]=t.values[this.setting.id],this.$parent.updateSettings(this.addon,{settingId:this.setting.id}),this.toggle()},msg(...t){return this.$root.msg(...t)}}},Qo=["disabled","title"],ei=l("img",{src:zt,class:"icon-type"},null,-1),ti=[ei],ni={key:0,class:"color-preview"},si={key:1,class:"text-preview"},oi=["onClick"],ii={key:0,class:"color-preview"},ri={key:1,class:"text-preview"};function ai(t,e,n,s,o,i){return p(),v("div",{class:U({"setting-dropdown":!0,open:o.isOpen})},[l("button",{type:"button",class:"large-button clear-button",disabled:!n.enabled,onClick:e[0]||(e[0]=(...r)=>i.toggle&&i.toggle(...r)),title:i.msg("reset")},ti,8,Qo),l("ul",null,[l("li",{onClick:e[1]||(e[1]=(...r)=>i.resetToDefault&&i.resetToDefault(...r))},[n.setting.type==="color"?(p(),v("span",ni,[l("span",{style:ye({backgroundColor:n.setting.default})},null,4)])):$("",!0),l("span",null,k(i.msg("default")),1),n.setting.type!=="color"?(p(),v("span",si,k(n.setting.default),1)):$("",!0)]),(p(!0),v(z,null,X(n.presets,r=>(p(),v(z,null,[(r.values.hasOwnProperty(n.setting.id)&&n.setting.type==="color"?r.values[n.setting.id].toLowerCase()!==n.setting.default.toLowerCase():r.values[n.setting.id]!==n.setting.default)?(p(),v("li",{key:0,onClick:d=>i.resetToPreset(r)},[n.setting.type==="color"?(p(),v("span",ii,[l("span",{style:ye({backgroundColor:r.values[n.setting.id]})},null,4)])):$("",!0),l("span",null,k(r.name),1),n.setting.type!=="color"?(p(),v("span",ri,k(r.values[n.setting.id]),1)):$("",!0)],8,oi)):$("",!0)],64))),256))])],2)}const li=fe(Zo,[["render",ai]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(n),!0).forEach(function(s){di(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Tt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tt=function(e){return typeof e}:Tt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(t)}function di(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ce(){return Ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ce.apply(this,arguments)}function ci(t,e){if(t==null)return{};var n={},s=Object.keys(t),o,i;for(i=0;i<s.length;i++)o=s[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function ui(t,e){if(t==null)return{};var n=ci(t,e),s,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}var hi="1.15.0";function Ee(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Te=Ee(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ht=Ee(/Edge/i),Yn=Ee(/firefox/i),at=Ee(/safari/i)&&!Ee(/chrome/i)&&!Ee(/android/i),ws=Ee(/iP(ad|od|hone)/i),_s=Ee(/chrome/i)&&Ee(/android/i),xs={capture:!1,passive:!1};function F(t,e,n){t.addEventListener(e,n,!Te&&xs)}function N(t,e,n){t.removeEventListener(e,n,!Te&&xs)}function Nt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function gi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function be(t,e,n,s){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Nt(t,e):Nt(t,e))||s&&t===n)return t;if(t===n)break}while(t=gi(t))}return null}var Kn=/\s+/g;function ae(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(Kn," ").replace(" "+e+" "," ");t.className=(s+(n?" "+e:"")).replace(Kn," ")}}function M(t,e,n){var s=t&&t.style;if(s){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=n+(typeof n=="string"?"":"px")}}function qe(t,e){var n="";if(typeof t=="string")n=t;else do{var s=M(t,"transform");s&&s!=="none"&&(n=s+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ss(t,e,n){if(t){var s=t.getElementsByTagName(e),o=0,i=s.length;if(n)for(;o<i;o++)n(s[o],o);return s}return[]}function xe(){var t=document.scrollingElement;return t||document.documentElement}function Z(t,e,n,s,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,r,d,a,c,m,h;if(t!==window&&t.parentNode&&t!==xe()?(i=t.getBoundingClientRect(),r=i.top,d=i.left,a=i.bottom,c=i.right,m=i.height,h=i.width):(r=0,d=0,a=window.innerHeight,c=window.innerWidth,m=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Te))do if(o&&o.getBoundingClientRect&&(M(o,"transform")!=="none"||n&&M(o,"position")!=="static")){var g=o.getBoundingClientRect();r-=g.top+parseInt(M(o,"border-top-width")),d-=g.left+parseInt(M(o,"border-left-width")),a=r+i.height,c=d+i.width;break}while(o=o.parentNode);if(s&&t!==window){var u=qe(o||t),f=u&&u.a,b=u&&u.d;u&&(r/=b,d/=f,h/=f,m/=b,a=r+m,c=d+h)}return{top:r,left:d,bottom:a,right:c,width:h,height:m}}}function qn(t,e,n){for(var s=Le(t,!0),o=Z(t)[e];s;){var i=Z(s)[n],r=void 0;if(n==="top"||n==="left"?r=o>=i:r=o<=i,!r)return s;if(s===xe())break;s=Le(s,!1)}return!1}function Je(t,e,n,s){for(var o=0,i=0,r=t.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==C.ghost&&(s||r[i]!==C.dragged)&&be(r[i],n.draggable,t,!1)){if(o===e)return r[i];o++}i++}return null}function Mn(t,e){for(var n=t.lastElementChild;n&&(n===C.ghost||M(n,"display")==="none"||e&&!Nt(n,e));)n=n.previousElementSibling;return n||null}function he(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==C.clone&&(!e||Nt(t,e))&&n++;return n}function Jn(t){var e=0,n=0,s=xe();if(t)do{var o=qe(t),i=o.a,r=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*r}while(t!==s&&(t=t.parentNode));return[e,n]}function mi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[n][s])return Number(n)}return-1}function Le(t,e){if(!t||!t.getBoundingClientRect)return xe();var n=t,s=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=M(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return xe();if(s||e)return n;s=!0}}while(n=n.parentNode);return xe()}function pi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function en(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var lt;function ks(t,e){return function(){if(!lt){var n=arguments,s=this;n.length===1?t.call(s,n[0]):t.apply(s,n),lt=setTimeout(function(){lt=void 0},e)}}}function fi(){clearTimeout(lt),lt=void 0}function Es(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Ms(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var ue="Sortable"+new Date().getTime();function vi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(o){if(!(M(o,"display")==="none"||o===C.ghost)){t.push({target:o,rect:Z(o)});var i=Se({},t[t.length-1].rect);if(o.thisAnimationDuration){var r=qe(o,!0);r&&(i.top-=r.f,i.left-=r.e)}o.fromRect=i}})}},addAnimationState:function(s){t.push(s)},removeAnimationState:function(s){t.splice(mi(t,{target:s}),1)},animateAll:function(s){var o=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var i=!1,r=0;t.forEach(function(d){var a=0,c=d.target,m=c.fromRect,h=Z(c),g=c.prevFromRect,u=c.prevToRect,f=d.rect,b=qe(c,!0);b&&(h.top-=b.f,h.left-=b.e),c.toRect=h,c.thisAnimationDuration&&en(g,h)&&!en(m,h)&&(f.top-h.top)/(f.left-h.left)===(m.top-h.top)/(m.left-h.left)&&(a=yi(f,g,u,o.options)),en(h,m)||(c.prevFromRect=m,c.prevToRect=h,a||(a=o.options.animation),o.animate(c,f,h,a)),a&&(i=!0,r=Math.max(r,a),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},a),c.thisAnimationDuration=a)}),clearTimeout(e),i?e=setTimeout(function(){typeof s=="function"&&s()},r):typeof s=="function"&&s(),t=[]},animate:function(s,o,i,r){if(r){M(s,"transition",""),M(s,"transform","");var d=qe(this.el),a=d&&d.a,c=d&&d.d,m=(o.left-i.left)/(a||1),h=(o.top-i.top)/(c||1);s.animatingX=!!m,s.animatingY=!!h,M(s,"transform","translate3d("+m+"px,"+h+"px,0)"),this.forRepaintDummy=bi(s),M(s,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),M(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){M(s,"transition",""),M(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},r)}}}}function bi(t){return t.offsetWidth}function yi(t,e,n,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*s.animation}var Ue=[],tn={initializeByDefault:!0},gt={mount:function(e){for(var n in tn)tn.hasOwnProperty(n)&&!(n in e)&&(e[n]=tn[n]);Ue.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ue.push(e)},pluginEvent:function(e,n,s){var o=this;this.eventCanceled=!1,s.cancel=function(){o.eventCanceled=!0};var i=e+"Global";Ue.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][i]&&n[r.pluginName][i](Se({sortable:n},s)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Se({sortable:n},s)))})},initializePlugins:function(e,n,s,o){Ue.forEach(function(d){var a=d.pluginName;if(!(!e.options[a]&&!d.initializeByDefault)){var c=new d(e,n,e.options);c.sortable=e,c.options=e.options,e[a]=c,Ce(s,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var r=this.modifyOption(e,i,e.options[i]);typeof r<"u"&&(e.options[i]=r)}},getEventProperties:function(e,n){var s={};return Ue.forEach(function(o){typeof o.eventProperties=="function"&&Ce(s,o.eventProperties.call(n[o.pluginName],e))}),s},modifyOption:function(e,n,s){var o;return Ue.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(o=i.optionListeners[n].call(e[i.pluginName],s))}),o}};function wi(t){var e=t.sortable,n=t.rootEl,s=t.name,o=t.targetEl,i=t.cloneEl,r=t.toEl,d=t.fromEl,a=t.oldIndex,c=t.newIndex,m=t.oldDraggableIndex,h=t.newDraggableIndex,g=t.originalEvent,u=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[ue],!!e){var b,E=e.options,w="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!Te&&!ht?b=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(s,!0,!0)),b.to=r||n,b.from=d||n,b.item=o||n,b.clone=i,b.oldIndex=a,b.newIndex=c,b.oldDraggableIndex=m,b.newDraggableIndex=h,b.originalEvent=g,b.pullMode=u?u.lastPutMode:void 0;var I=Se(Se({},f),gt.getEventProperties(s,e));for(var O in I)b[O]=I[O];n&&n.dispatchEvent(b),E[w]&&E[w].call(e,b)}}var _i=["evt"],ie=function(e,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.evt,i=ui(s,_i);gt.pluginEvent.bind(C)(e,n,Se({dragEl:y,parentEl:G,ghostEl:A,rootEl:H,nextEl:Re,lastDownEl:Ot,cloneEl:V,cloneHidden:$e,dragStarted:st,putSortable:Q,activeSortable:C.active,originalEvent:o,oldIndex:Ke,oldDraggableIndex:dt,newIndex:le,newDraggableIndex:Ae,hideGhostForTarget:Os,unhideGhostForTarget:Ds,cloneNowHidden:function(){$e=!0},cloneNowShown:function(){$e=!1},dispatchSortableEvent:function(d){se({sortable:n,name:d,originalEvent:o})}},i))};function se(t){wi(Se({putSortable:Q,cloneEl:V,targetEl:y,rootEl:H,oldIndex:Ke,oldDraggableIndex:dt,newIndex:le,newDraggableIndex:Ae},t))}var y,G,A,H,Re,Ot,V,$e,Ke,le,dt,Ae,xt,Q,Ge=!1,Ft=!1,Rt=[],Ne,ge,nn,sn,Zn,Qn,st,He,ct,ut=!1,St=!1,Dt,te,on=[],fn=!1,jt=[],Ut=typeof document<"u",kt=ws,es=ht||Te?"cssFloat":"float",xi=Ut&&!_s&&!ws&&"draggable"in document.createElement("div"),Cs=function(){if(Ut){if(Te)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Is=function(e,n){var s=M(e),o=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),i=Je(e,0,n),r=Je(e,1,n),d=i&&M(i),a=r&&M(r),c=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Z(i).width,m=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Z(r).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&d.float&&d.float!=="none"){var h=d.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===h)?"vertical":"horizontal"}return i&&(d.display==="block"||d.display==="flex"||d.display==="table"||d.display==="grid"||c>=o&&s[es]==="none"||r&&s[es]==="none"&&c+m>o)?"vertical":"horizontal"},Si=function(e,n,s){var o=s?e.left:e.top,i=s?e.right:e.bottom,r=s?e.width:e.height,d=s?n.left:n.top,a=s?n.right:n.bottom,c=s?n.width:n.height;return o===d||i===a||o+r/2===d+c/2},ki=function(e,n){var s;return Rt.some(function(o){var i=o[ue].options.emptyInsertThreshold;if(!(!i||Mn(o))){var r=Z(o),d=e>=r.left-i&&e<=r.right+i,a=n>=r.top-i&&n<=r.bottom+i;if(d&&a)return s=o}}),s},Ts=function(e){function n(i,r){return function(d,a,c,m){var h=d.options.group.name&&a.options.group.name&&d.options.group.name===a.options.group.name;if(i==null&&(r||h))return!0;if(i==null||i===!1)return!1;if(r&&i==="clone")return i;if(typeof i=="function")return n(i(d,a,c,m),r)(d,a,c,m);var g=(r?d:a).options.group.name;return i===!0||typeof i=="string"&&i===g||i.join&&i.indexOf(g)>-1}}var s={},o=e.group;(!o||Tt(o)!="object")&&(o={name:o}),s.name=o.name,s.checkPull=n(o.pull,!0),s.checkPut=n(o.put),s.revertClone=o.revertClone,e.group=s},Os=function(){!Cs&&A&&M(A,"display","none")},Ds=function(){!Cs&&A&&M(A,"display","")};Ut&&!_s&&document.addEventListener("click",function(t){if(Ft)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ft=!1,!1},!0);var Fe=function(e){if(y){e=e.touches?e.touches[0]:e;var n=ki(e.clientX,e.clientY);if(n){var s={};for(var o in e)e.hasOwnProperty(o)&&(s[o]=e[o]);s.target=s.rootEl=n,s.preventDefault=void 0,s.stopPropagation=void 0,n[ue]._onDragOver(s)}}},Ei=function(e){y&&y.parentNode[ue]._isOutsideThisEl(e.target)};function C(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ce({},e),t[ue]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Is(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,d){r.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:C.supportPointer!==!1&&"PointerEvent"in window&&!at,emptyInsertThreshold:5};gt.initializePlugins(this,t,n);for(var s in n)!(s in e)&&(e[s]=n[s]);Ts(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:xi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?F(t,"pointerdown",this._onTapStart):(F(t,"mousedown",this._onTapStart),F(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(F(t,"dragover",this),F(t,"dragenter",this)),Rt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ce(this,vi())}C.prototype={constructor:C,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(He=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,s=this.el,o=this.options,i=o.preventOnFilter,r=e.type,d=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(d||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,m=o.filter;if($i(s),!y&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&at&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=be(a,o.draggable,s,!1),!(a&&a.animated)&&Ot!==a)){if(Ke=he(a),dt=he(a,o.draggable),typeof m=="function"){if(m.call(this,e,a,this)){se({sortable:n,rootEl:c,name:"filter",targetEl:a,toEl:s,fromEl:s}),ie("filter",n,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(h){if(h=be(c,h.trim(),s,!1),h)return se({sortable:n,rootEl:h,name:"filter",targetEl:a,fromEl:s,toEl:s}),ie("filter",n,{evt:e}),!0}),m)){i&&e.cancelable&&e.preventDefault();return}o.handle&&!be(c,o.handle,s,!1)||this._prepareDragStart(e,d,a)}}},_prepareDragStart:function(e,n,s){var o=this,i=o.el,r=o.options,d=i.ownerDocument,a;if(s&&!y&&s.parentNode===i){var c=Z(s);if(H=i,y=s,G=y.parentNode,Re=y.nextSibling,Ot=s,xt=r.group,C.dragged=y,Ne={target:y,clientX:(n||e).clientX,clientY:(n||e).clientY},Zn=Ne.clientX-c.left,Qn=Ne.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,y.style["will-change"]="all",a=function(){if(ie("delayEnded",o,{evt:e}),C.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Yn&&o.nativeDraggable&&(y.draggable=!0),o._triggerDragStart(e,n),se({sortable:o,name:"choose",originalEvent:e}),ae(y,r.chosenClass,!0)},r.ignore.split(",").forEach(function(m){Ss(y,m.trim(),rn)}),F(d,"dragover",Fe),F(d,"mousemove",Fe),F(d,"touchmove",Fe),F(d,"mouseup",o._onDrop),F(d,"touchend",o._onDrop),F(d,"touchcancel",o._onDrop),Yn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ie("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ht||Te))){if(C.eventCanceled){this._onDrop();return}F(d,"mouseup",o._disableDelayedDrag),F(d,"touchend",o._disableDelayedDrag),F(d,"touchcancel",o._disableDelayedDrag),F(d,"mousemove",o._delayedDragTouchMoveHandler),F(d,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&F(d,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&rn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._disableDelayedDrag),N(e,"touchend",this._disableDelayedDrag),N(e,"touchcancel",this._disableDelayedDrag),N(e,"mousemove",this._delayedDragTouchMoveHandler),N(e,"touchmove",this._delayedDragTouchMoveHandler),N(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?F(document,"pointermove",this._onTouchMove):n?F(document,"touchmove",this._onTouchMove):F(document,"mousemove",this._onTouchMove):(F(y,"dragend",this),F(H,"dragstart",this._onDragStart));try{document.selection?At(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ge=!1,H&&y){ie("dragStarted",this,{evt:n}),this.nativeDraggable&&F(document,"dragover",Ei);var s=this.options;!e&&ae(y,s.dragClass,!1),ae(y,s.ghostClass,!0),C.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Os();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),e!==n);)n=e;if(y.parentNode[ue]._isOutsideThisEl(e),n)do{if(n[ue]){var s=void 0;if(s=n[ue]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:n}),s&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Ds()}},_onTouchMove:function(e){if(Ne){var n=this.options,s=n.fallbackTolerance,o=n.fallbackOffset,i=e.touches?e.touches[0]:e,r=A&&qe(A,!0),d=A&&r&&r.a,a=A&&r&&r.d,c=kt&&te&&Jn(te),m=(i.clientX-Ne.clientX+o.x)/(d||1)+(c?c[0]-on[0]:0)/(d||1),h=(i.clientY-Ne.clientY+o.y)/(a||1)+(c?c[1]-on[1]:0)/(a||1);if(!C.active&&!Ge){if(s&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(A){r?(r.e+=m-(nn||0),r.f+=h-(sn||0)):r={a:1,b:0,c:0,d:1,e:m,f:h};var g="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");M(A,"webkitTransform",g),M(A,"mozTransform",g),M(A,"msTransform",g),M(A,"transform",g),nn=m,sn=h,ge=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!A){var e=this.options.fallbackOnBody?document.body:H,n=Z(y,!0,kt,!0,e),s=this.options;if(kt){for(te=e;M(te,"position")==="static"&&M(te,"transform")==="none"&&te!==document;)te=te.parentNode;te!==document.body&&te!==document.documentElement?(te===document&&(te=xe()),n.top+=te.scrollTop,n.left+=te.scrollLeft):te=xe(),on=Jn(te)}A=y.cloneNode(!0),ae(A,s.ghostClass,!1),ae(A,s.fallbackClass,!0),ae(A,s.dragClass,!0),M(A,"transition",""),M(A,"transform",""),M(A,"box-sizing","border-box"),M(A,"margin",0),M(A,"top",n.top),M(A,"left",n.left),M(A,"width",n.width),M(A,"height",n.height),M(A,"opacity","0.8"),M(A,"position",kt?"absolute":"fixed"),M(A,"zIndex","100000"),M(A,"pointerEvents","none"),C.ghost=A,e.appendChild(A),M(A,"transform-origin",Zn/parseInt(A.style.width)*100+"% "+Qn/parseInt(A.style.height)*100+"%")}},_onDragStart:function(e,n){var s=this,o=e.dataTransfer,i=s.options;if(ie("dragStart",this,{evt:e}),C.eventCanceled){this._onDrop();return}ie("setupClone",this),C.eventCanceled||(V=Ms(y),V.removeAttribute("id"),V.draggable=!1,V.style["will-change"]="",this._hideClone(),ae(V,this.options.chosenClass,!1),C.clone=V),s.cloneId=At(function(){ie("clone",s),!C.eventCanceled&&(s.options.removeCloneOnHide||H.insertBefore(V,y),s._hideClone(),se({sortable:s,name:"clone"}))}),!n&&ae(y,i.dragClass,!0),n?(Ft=!0,s._loopId=setInterval(s._emulateDragOver,50)):(N(document,"mouseup",s._onDrop),N(document,"touchend",s._onDrop),N(document,"touchcancel",s._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(s,o,y)),F(document,"drop",s),M(y,"transform","translateZ(0)")),Ge=!0,s._dragStartId=At(s._dragStarted.bind(s,n,e)),F(document,"selectstart",s),st=!0,at&&M(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,s=e.target,o,i,r,d=this.options,a=d.group,c=C.active,m=xt===a,h=d.sort,g=Q||c,u,f=this,b=!1;if(fn)return;function E(ke,Be){ie(ke,f,Se({evt:e,isOwner:m,axis:u?"vertical":"horizontal",revert:r,dragRect:o,targetRect:i,canSort:h,fromSortable:g,target:s,completed:I,onMove:function(pt,Rs){return Et(H,n,y,o,pt,Z(pt),e,Rs)},changed:O},Be))}function w(){E("dragOverAnimationCapture"),f.captureAnimationState(),f!==g&&g.captureAnimationState()}function I(ke){return E("dragOverCompleted",{insertion:ke}),ke&&(m?c._hideClone():c._showClone(f),f!==g&&(ae(y,Q?Q.options.ghostClass:c.options.ghostClass,!1),ae(y,d.ghostClass,!0)),Q!==f&&f!==C.active?Q=f:f===C.active&&Q&&(Q=null),g===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){E("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(s===y&&!y.animated||s===n&&!s.animated)&&(He=null),!d.dragoverBubble&&!e.rootEl&&s!==document&&(y.parentNode[ue]._isOutsideThisEl(e.target),!ke&&Fe(e)),!d.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function O(){le=he(y),Ae=he(y,d.draggable),se({sortable:f,name:"change",toEl:n,newIndex:le,newDraggableIndex:Ae,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=be(s,d.draggable,n,!0),E("dragOver"),C.eventCanceled)return b;if(y.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return I(!1);if(Ft=!1,c&&!d.disabled&&(m?h||(r=G!==H):Q===this||(this.lastPutMode=xt.checkPull(this,c,y,e))&&a.checkPut(this,c,y,e))){if(u=this._getDirection(e,s)==="vertical",o=Z(y),E("dragOverValid"),C.eventCanceled)return b;if(r)return G=H,w(),this._hideClone(),E("revert"),C.eventCanceled||(Re?H.insertBefore(y,Re):H.appendChild(y)),I(!0);var L=Mn(n,d.draggable);if(!L||Ti(e,u,this)&&!L.animated){if(L===y)return I(!1);if(L&&n===e.target&&(s=L),s&&(i=Z(s)),Et(H,n,y,o,s,i,e,!!s)!==!1)return w(),L&&L.nextSibling?n.insertBefore(y,L.nextSibling):n.appendChild(y),G=n,O(),I(!0)}else if(L&&Ii(e,u,this)){var W=Je(n,0,d,!0);if(W===y)return I(!1);if(s=W,i=Z(s),Et(H,n,y,o,s,i,e,!1)!==!1)return w(),n.insertBefore(y,W),G=n,O(),I(!0)}else if(s.parentNode===n){i=Z(s);var J=0,R,Y=y.parentNode!==n,B=!Si(y.animated&&y.toRect||o,s.animated&&s.toRect||i,u),ne=u?"top":"left",_=qn(s,"top","top")||qn(y,"top","top"),x=_?_.scrollTop:void 0;He!==s&&(R=i[ne],ut=!1,St=!B&&d.invertSwap||Y),J=Oi(e,s,i,u,B?1:d.swapThreshold,d.invertedSwapThreshold==null?d.swapThreshold:d.invertedSwapThreshold,St,He===s);var S;if(J!==0){var D=he(y);do D-=J,S=G.children[D];while(S&&(M(S,"display")==="none"||S===A))}if(J===0||S===s)return I(!1);He=s,ct=J;var P=s.nextElementSibling,K=!1;K=J===1;var Oe=Et(H,n,y,o,s,i,e,K);if(Oe!==!1)return(Oe===1||Oe===-1)&&(K=Oe===1),fn=!0,setTimeout(Ci,30),w(),K&&!P?n.appendChild(y):s.parentNode.insertBefore(y,K?P:s),_&&Es(_,0,x-_.scrollTop),G=y.parentNode,R!==void 0&&!St&&(Dt=Math.abs(R-Z(s)[ne])),O(),I(!0)}if(n.contains(y))return I(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){N(document,"mousemove",this._onTouchMove),N(document,"touchmove",this._onTouchMove),N(document,"pointermove",this._onTouchMove),N(document,"dragover",Fe),N(document,"mousemove",Fe),N(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._onDrop),N(e,"touchend",this._onDrop),N(e,"pointerup",this._onDrop),N(e,"touchcancel",this._onDrop),N(document,"selectstart",this)},_onDrop:function(e){var n=this.el,s=this.options;if(le=he(y),Ae=he(y,s.draggable),ie("drop",this,{evt:e}),G=y&&y.parentNode,le=he(y),Ae=he(y,s.draggable),C.eventCanceled){this._nulling();return}Ge=!1,St=!1,ut=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vn(this.cloneId),vn(this._dragStartId),this.nativeDraggable&&(N(document,"drop",this),N(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),at&&M(document.body,"user-select",""),M(y,"transform",""),e&&(st&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),(H===G||Q&&Q.lastPutMode!=="clone")&&V&&V.parentNode&&V.parentNode.removeChild(V),y&&(this.nativeDraggable&&N(y,"dragend",this),rn(y),y.style["will-change"]="",st&&!Ge&&ae(y,Q?Q.options.ghostClass:this.options.ghostClass,!1),ae(y,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:G,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==G?(le>=0&&(se({rootEl:G,name:"add",toEl:G,fromEl:H,originalEvent:e}),se({sortable:this,name:"remove",toEl:G,originalEvent:e}),se({rootEl:G,name:"sort",toEl:G,fromEl:H,originalEvent:e}),se({sortable:this,name:"sort",toEl:G,originalEvent:e})),Q&&Q.save()):le!==Ke&&le>=0&&(se({sortable:this,name:"update",toEl:G,originalEvent:e}),se({sortable:this,name:"sort",toEl:G,originalEvent:e})),C.active&&((le==null||le===-1)&&(le=Ke,Ae=dt),se({sortable:this,name:"end",toEl:G,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ie("nulling",this),H=y=G=A=Re=V=Ot=$e=Ne=ge=st=le=Ae=Ke=dt=He=ct=Q=xt=C.dragged=C.ghost=C.clone=C.active=null,jt.forEach(function(e){e.checked=!0}),jt.length=nn=sn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Mi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,s=this.el.children,o=0,i=s.length,r=this.options;o<i;o++)n=s[o],be(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Ai(n));return e},sort:function(e,n){var s={},o=this.el;this.toArray().forEach(function(i,r){var d=o.children[r];be(d,this.options.draggable,o,!1)&&(s[i]=d)},this),n&&this.captureAnimationState(),e.forEach(function(i){s[i]&&(o.removeChild(s[i]),o.appendChild(s[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return be(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var s=this.options;if(n===void 0)return s[e];var o=gt.modifyOption(this,e,n);typeof o<"u"?s[e]=o:s[e]=n,e==="group"&&Ts(s)},destroy:function(){ie("destroy",this);var e=this.el;e[ue]=null,N(e,"mousedown",this._onTapStart),N(e,"touchstart",this._onTapStart),N(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(N(e,"dragover",this),N(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Rt.splice(Rt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$e){if(ie("hideClone",this),C.eventCanceled)return;M(V,"display","none"),this.options.removeCloneOnHide&&V.parentNode&&V.parentNode.removeChild(V),$e=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($e){if(ie("showClone",this),C.eventCanceled)return;y.parentNode==H&&!this.options.group.revertClone?H.insertBefore(V,y):Re?H.insertBefore(V,Re):H.appendChild(V),this.options.group.revertClone&&this.animate(y,V),M(V,"display",""),$e=!1}}};function Mi(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Et(t,e,n,s,o,i,r,d){var a,c=t[ue],m=c.options.onMove,h;return window.CustomEvent&&!Te&&!ht?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=s,a.related=o||e,a.relatedRect=i||Z(e),a.willInsertAfter=d,a.originalEvent=r,t.dispatchEvent(a),m&&(h=m.call(c,a,r)),h}function rn(t){t.draggable=!1}function Ci(){fn=!1}function Ii(t,e,n){var s=Z(Je(n.el,0,n.options,!0)),o=10;return e?t.clientX<s.left-o||t.clientY<s.top&&t.clientX<s.right:t.clientY<s.top-o||t.clientY<s.bottom&&t.clientX<s.left}function Ti(t,e,n){var s=Z(Mn(n.el,n.options.draggable)),o=10;return e?t.clientX>s.right+o||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+o}function Oi(t,e,n,s,o,i,r,d){var a=s?t.clientY:t.clientX,c=s?n.height:n.width,m=s?n.top:n.left,h=s?n.bottom:n.right,g=!1;if(!r){if(d&&Dt<c*o){if(!ut&&(ct===1?a>m+c*i/2:a<h-c*i/2)&&(ut=!0),ut)g=!0;else if(ct===1?a<m+Dt:a>h-Dt)return-ct}else if(a>m+c*(1-o)/2&&a<h-c*(1-o)/2)return Di(e)}return g=g||r,g&&(a<m+c*i/2||a>h-c*i/2)?a>m+c/2?1:-1:0}function Di(t){return he(y)<he(t)?1:-1}function Ai(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,s=0;n--;)s+=e.charCodeAt(n);return s.toString(36)}function $i(t){jt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var s=e[n];s.checked&&jt.push(s)}}function At(t){return setTimeout(t,0)}function vn(t){return clearTimeout(t)}Ut&&F(document,"touchmove",function(t){(C.active||Ge)&&t.cancelable&&t.preventDefault()});C.utils={on:F,off:N,css:M,find:Ss,is:function(e,n){return!!be(e,n,e,!1)},extend:pi,throttle:ks,closest:be,toggleClass:ae,clone:Ms,index:he,nextTick:At,cancelNextTick:vn,detectDirection:Is,getChild:Je};C.get=function(t){return t[ue]};C.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(C.utils=Se(Se({},C.utils),s.utils)),gt.mount(s)})};C.create=function(t,e){return new C(t,e)};C.version=hi;var q=[],ot,bn,yn=!1,an,ln,Bt,it;function Li(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var s=n.originalEvent;this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):this.options.supportPointer?F(document,"pointermove",this._handleFallbackAutoScroll):s.touches?F(document,"touchmove",this._handleFallbackAutoScroll):F(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var s=n.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):(N(document,"pointermove",this._handleFallbackAutoScroll),N(document,"touchmove",this._handleFallbackAutoScroll),N(document,"mousemove",this._handleFallbackAutoScroll)),ts(),$t(),fi()},nulling:function(){Bt=bn=ot=yn=it=an=ln=null,q.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,s){var o=this,i=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,d=document.elementFromPoint(i,r);if(Bt=n,s||this.options.forceAutoScrollFallback||ht||Te||at){dn(n,this.options,d,s);var a=Le(d,!0);yn&&(!it||i!==an||r!==ln)&&(it&&ts(),it=setInterval(function(){var c=Le(document.elementFromPoint(i,r),!0);c!==a&&(a=c,$t()),dn(n,o.options,c,s)},10),an=i,ln=r)}else{if(!this.options.bubbleScroll||Le(d,!0)===xe()){$t();return}dn(n,this.options,Le(d,!1),!1)}}},Ce(t,{pluginName:"scroll",initializeByDefault:!0})}function $t(){q.forEach(function(t){clearInterval(t.pid)}),q=[]}function ts(){clearInterval(it)}var dn=ks(function(t,e,n,s){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,d=e.scrollSpeed,a=xe(),c=!1,m;bn!==n&&(bn=n,$t(),ot=e.scroll,m=e.scrollFn,ot===!0&&(ot=Le(n,!0)));var h=0,g=ot;do{var u=g,f=Z(u),b=f.top,E=f.bottom,w=f.left,I=f.right,O=f.width,L=f.height,W=void 0,J=void 0,R=u.scrollWidth,Y=u.scrollHeight,B=M(u),ne=u.scrollLeft,_=u.scrollTop;u===a?(W=O<R&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),J=L<Y&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(W=O<R&&(B.overflowX==="auto"||B.overflowX==="scroll"),J=L<Y&&(B.overflowY==="auto"||B.overflowY==="scroll"));var x=W&&(Math.abs(I-o)<=r&&ne+O<R)-(Math.abs(w-o)<=r&&!!ne),S=J&&(Math.abs(E-i)<=r&&_+L<Y)-(Math.abs(b-i)<=r&&!!_);if(!q[h])for(var D=0;D<=h;D++)q[D]||(q[D]={});(q[h].vx!=x||q[h].vy!=S||q[h].el!==u)&&(q[h].el=u,q[h].vx=x,q[h].vy=S,clearInterval(q[h].pid),(x!=0||S!=0)&&(c=!0,q[h].pid=setInterval(function(){s&&this.layer===0&&C.active._onTouchMove(Bt);var P=q[this.layer].vy?q[this.layer].vy*d:0,K=q[this.layer].vx?q[this.layer].vx*d:0;typeof m=="function"&&m.call(C.dragged.parentNode[ue],K,P,t,Bt,q[this.layer].el)!=="continue"||Es(q[this.layer].el,K,P)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&g!==a&&(g=Le(g,!1)));yn=c}},30),As=function(e){var n=e.originalEvent,s=e.putSortable,o=e.dragEl,i=e.activeSortable,r=e.dispatchSortableEvent,d=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var c=s||i;d();var m=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(m.clientX,m.clientY);a(),c&&!c.el.contains(h)&&(r("spill"),this.onSpill({dragEl:o,putSortable:s}))}};function Cn(){}Cn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var o=Je(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),s&&s.animateAll()},drop:As};Ce(Cn,{pluginName:"revertOnSpill"});function In(){}In.prototype={onSpill:function(e){var n=e.dragEl,s=e.putSortable,o=s||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:As};Ce(In,{pluginName:"removeOnSpill"});C.mount(new Li);C.mount(In,Cn);const Pi="/webpages/dist/assets/drag.svg",Ni="/webpages/dist/assets/plus.svg",$s="/webpages/dist/assets/undo.svg";const Fi={components:{Picker:Jo,ResetDropdown:li},props:["addon","tableChild","setting","addon-settings"],data(){var t;return{rowDropdownOpen:!1,noResetDropdown:["table","boolean","select"].includes((t=this.setting)==null?void 0:t.type)}},mounted(){Pe.$on("close-reset-dropdowns",t=>{this.rowDropdownOpen&&this.setting.id!==t&&(this.rowDropdownOpen=!1)})},computed:{show(){return!!(!this.setting.if||this.setting.if.addonEnabled&&(Array.isArray(this.setting.if.addonEnabled)?this.setting.if.addonEnabled:[this.setting.if.addonEnabled]).some(e=>this.$root.manifestsById[e]._enabled===!0)||this.setting.if.settings&&Object.keys(this.setting.if.settings).some(e=>(Array.isArray(this.setting.if.settings[e])?this.setting.if.settings[e]:[this.setting.if.settings[e]]).some(s=>{var o,i;return this.addonSettings[e]===s||((i=(o=this.$parent)==null?void 0:o.addonSettings)==null?void 0:i[e])===s}))===!0)},showResetDropdown(){return!this.tableChild&&this.addon.presets&&this.addon.presets.some(t=>Object.prototype.hasOwnProperty.call(t.values,this.setting.id)&&(this.setting.type==="color"?t.values[this.setting.id].toLowerCase()!==this.setting.default.toLowerCase():t.values[this.setting.id]!==this.setting.default))},isNewOption(){if(!this.addon.latestUpdate)return!1;const[t,e,n]=this.$root.version.split("."),[s,o,i]=this.addon.latestUpdate.version.split(".");return t===s&&e===o?!!(this.addon.latestUpdate.newSettings&&this.addon.latestUpdate.newSettings.includes(this.setting.id)):!1}},methods:{updateTable(t){let e=this.addonSettings[this.setting.id];e.splice(t.newIndex,0,e.splice(t.oldIndex,1)[0]),this.updateSettings()},settingsName(t){const e=this.setting.name,n=/([\\]*)(@|#)([a-zA-Z0-9.\-\/_]*)/g;return e.replace(n,s=>{if(s[0]==="\\")return s.slice(1);if(s[0]==="@")return`<img class="inline-icon" src="../../images/icons/${s.split("@")[1]}"/>`;if(s[0]==="#")return`<img class="inline-icon" src="../../addons/${t._addonId}/${s.split("#")[1]}"/>`})},checkValidity(t){let e=t.target;this.addonSettings[this.setting.id]=e.validity.valid?e.value:this.setting.default},keySettingKeyDown(t){t.preventDefault(),t.target.value=t.ctrlKey?"Ctrl"+(t.shiftKey?" + Shift":"")+(t.key==="Control"||t.key==="Shift"?"":(t.ctrlKey?" + ":"")+(t.key.toUpperCase()===t.key?t.code.includes("Digit")?t.code.substring(5,t.code.length):t.key:t.key.toUpperCase())):""},keySettingKeyUp(t){t.target.value==="Ctrl"&&(t.target.value=""),this.updateOption(t.target.value)},getTableSetting(t){return this.setting.row.find(e=>e.id===t)},deleteTableRow(t){this.addonSettings[this.setting.id].splice(t,1),this.updateSettings()},addTableRow(t={}){const e=Object.assign({},this.setting.row.reduce((n,s)=>(n[s.id]=s.default,n),{}),t);this.addonSettings[this.setting.id].push(e),this.updateSettings(),this.rowDropdownOpen&&this.toggleRowDropdown()},toggleRowDropdown(){this.rowDropdownOpen=!this.rowDropdownOpen,this.$root.closePickers({isTrusted:!0},null,{callCloseDropdowns:!1}),this.$root.closeResetDropdowns({isTrusted:!0},this.setting.id)},msg(...t){return this.$root.msg(...t)},updateSettings(...t){t[0]||(t[0]=this.addon),this.$root.updateSettings(...t)},updateOption(t){this.addonSettings[this.setting.id]=t,this.updateSettings()},closePickers(...t){return this.$root.closePickers(...t)},closeResetDropdowns(...t){return this.$root.closeResetDropdowns(...t)}},directives:{sortable:{mounted:(t,e,n)=>{const s=new C(t,{handle:".handle",animation:300,onUpdate:e.value.update,disabled:!e.value.enabled});Pe.$on(`toggle-addon-request-${e.value.id}`,o=>{s.option("disabled",!o)})}}}},Ri={class:"setting-label-container"},ji=["innerHTML"],Bi={key:0,class:"setting-table"},zi={class:"setting-table-list"},Ui={class:"setting-table-row"},Hi={class:"setting-table-options"},Wi=["disabled","onClick"],Vi=l("img",{class:"icon-type",src:vs},null,-1),Gi=[Vi],Xi=["disabled"],Yi=l("img",{class:"icon-type",src:Pi},null,-1),Ki=[Yi],qi={class:"setting-table-row-settings"},Ji=["disabled"],Zi=l("img",{class:"icon-type",src:Ni},null,-1),Qi=[Zi],er=["disabled"],tr=l("img",{class:"icon-type",src:zt},null,-1),nr=[tr],sr=["onClick"],or=["disabled"],ir={key:2,class:"filter-options"},rr=["onClick"],ar=["disabled"],lr=["disabled","min","max"],dr=["disabled","placeholder","maxlength","minlength","required"],cr=["disabled","placeholder"],ur=["disabled","title"],hr=l("img",{src:$s,class:"icon-type"},null,-1),gr=[hr];function mr(t,e,n,s,o,i){const r=me("addon-tag"),d=me("AddonSetting",!0),a=me("picker"),c=me("reset-dropdown"),m=Lt("sortable"),h=Lt("click-outside");return j((p(),v("div",{class:U(["addon-setting",{"boolean-setting":n.setting.type==="boolean","number-setting":n.setting.type==="integer"||n.setting.type==="positive_integer"}])},[l("div",Ri,[l("div",{class:"setting-label",innerHTML:i.settingsName(n.addon)},null,8,ji),i.isNewOption?(p(),we(r,{key:0,tag:"new"})):$("",!0)]),o.noResetDropdown?(p(),v(z,{key:0},[n.setting.type==="table"?(p(),v("div",Bi,[j((p(),v("div",zi,[(p(!0),v(z,null,X(t.addonSettings[n.setting.id],(g,u)=>(p(),v("div",Ui,[l("div",Hi,[l("button",{disabled:!n.addon._enabled,class:"addon-buttons",onClick:f=>i.deleteTableRow(u)},Gi,8,Wi),l("button",{disabled:!n.addon._enabled,class:"addon-buttons handle"},Ki,8,Xi)]),l("div",qi,[(p(!0),v(z,null,X(g,(f,b)=>(p(),we(d,{addon:n.addon,"table-child":!0,setting:i.getTableSetting(b),"addon-settings":g},null,8,["addon","setting","addon-settings"]))),256))])]))),256))])),[[m,{update:i.updateTable,enabled:n.addon._enabled,id:n.addon.id}]]),l("div",{class:U(["addon-split-button setting-table-dropdown",{open:o.rowDropdownOpen}])},[l("button",{disabled:!n.addon._enabled,class:"addon-buttons addon-split-button-button",onClick:e[0]||(e[0]=g=>i.addTableRow())},Qi,8,Ji),j((p(),v("div",null,[l("button",{disabled:!n.addon._enabled,class:"addon-buttons addon-split-button-dropdown",onClick:e[1]||(e[1]=(...g)=>i.toggleRowDropdown&&i.toggleRowDropdown(...g))},nr,8,er),l("ul",null,[(p(!0),v(z,null,X(n.setting.presets,g=>(p(),v("li",{onClick:u=>i.addTableRow(g.values)},k(g.name),9,sr))),256))])])),[[h,i.closeResetDropdowns]])],2)])):$("",!0),n.setting.type==="boolean"?j((p(),v("input",{key:1,type:"checkbox",class:"setting-input check","onUpdate:modelValue":e[2]||(e[2]=g=>t.addonSettings[n.setting.id]=g),onChange:e[3]||(e[3]=g=>i.updateSettings()),disabled:!n.addon._enabled},null,40,or)),[[as,t.addonSettings[n.setting.id]]]):$("",!0),n.setting.type==="select"?(p(),v("div",ir,[(p(!0),v(z,null,X(n.setting.potentialValues,g=>(p(),v("div",{class:U(["filter-option",{sel:t.addonSettings[n.setting.id]===g.id,disabled:!n.addon._enabled}]),onClick:u=>i.updateOption(g.id)},k(g.name),11,rr))),256))])):$("",!0)],64)):(p(),v("div",{key:1,class:U(["setting-input-container",{"full-radius":n.tableChild}])},[n.setting.type==="positive_integer"?j((p(),v("input",{key:0,type:"number",class:"setting-input number","onUpdate:modelValue":e[4]||(e[4]=g=>t.addonSettings[n.setting.id]=g),onChange:e[5]||(e[5]=g=>i.checkValidity(g)||i.updateSettings()),disabled:!n.addon._enabled,min:"0",number:""},null,40,ar)),[[tt,t.addonSettings[n.setting.id]]]):$("",!0),n.setting.type==="integer"?j((p(),v("input",{key:1,type:"number",class:"setting-input number","onUpdate:modelValue":e[6]||(e[6]=g=>t.addonSettings[n.setting.id]=g),onChange:e[7]||(e[7]=g=>i.checkValidity(g)||i.updateSettings()),disabled:!n.addon._enabled,min:n.setting.min,max:n.setting.max,number:""},null,40,lr)),[[tt,t.addonSettings[n.setting.id]]]):$("",!0),n.setting.type==="string"||n.setting.type==="untranslated"?j((p(),v("input",{key:2,type:"text",class:"setting-input string","onUpdate:modelValue":e[8]||(e[8]=g=>t.addonSettings[n.setting.id]=g),onChange:e[9]||(e[9]=g=>i.checkValidity(g)||i.updateSettings()),disabled:!n.addon._enabled,placeholder:n.setting.default,maxlength:n.setting.max||100,minlength:n.setting.min||0,required:!!n.setting.min},null,40,dr)),[[tt,t.addonSettings[n.setting.id]]]):$("",!0),n.setting.type==="key"?j((p(),v("input",{key:3,type:"text",class:"setting-input","onUpdate:modelValue":e[10]||(e[10]=g=>t.addonSettings[n.setting.id]=g),onInput:e[11]||(e[11]=(...g)=>i.updateSettings&&i.updateSettings(...g)),onKeydown:e[12]||(e[12]=(...g)=>i.keySettingKeyDown&&i.keySettingKeyDown(...g)),onKeyup:e[13]||(e[13]=(...g)=>i.keySettingKeyUp&&i.keySettingKeyUp(...g)),disabled:!n.addon._enabled,placeholder:n.setting.default,maxlength:"100",spellcheck:"false"},null,40,cr)),[[tt,t.addonSettings[n.setting.id]]]):$("",!0),n.setting.type==="color"?j((p(),we(a,{key:4,modelValue:t.addonSettings[n.setting.id],"onUpdate:modelValue":e[14]||(e[14]=g=>t.addonSettings[n.setting.id]=g),setting:n.setting,addon:n.addon,alphaEnabled:n.setting.allowTransparency},null,8,["modelValue","setting","addon","alphaEnabled"])),[[h,i.closePickers]]):$("",!0),i.showResetDropdown?j((p(),we(c,{key:5,setting:n.setting,enabled:n.addon._enabled,presets:n.addon.presets},null,8,["setting","enabled","presets"])),[[h,i.closeResetDropdowns]]):$("",!0),!n.tableChild&&!i.showResetDropdown?(p(),v("button",{key:6,type:"button",class:"large-button clear-button",disabled:!n.addon._enabled,title:i.msg("reset"),onClick:e[15]||(e[15]=g=>i.updateOption(n.setting.default||""))},gr,8,ur)):$("",!0)],2))],2)),[[ee,i.show]])}const pr=fe(Fi,[["render",mr]]);const fr=window.parent!==window,vr={props:["tag"],data(){return{}},computed:{tagInfo(){return fs.find(t=>t.matchName===this.tag)},shouldShow(){return fr?this.tagInfo&&this.tagInfo.iframeAlwaysShow:this.tagInfo&&(!this.tagInfo.addonTabShow||this.tagInfo.addonTabShow[this.$root.selectedCategory])},tagName(){return chrome.i18n.getMessage(this.tagInfo.name)},tagTooltip(){return chrome.i18n.getMessage(this.tagInfo.tooltipText)}}},br={key:0,class:"tooltiptext"};function yr(t,e,n,s,o,i){return i.shouldShow?(p(),v("div",{key:0,class:U(["badge",{tooltip:i.tagInfo.tooltipText,blue:i.tagInfo.color==="blue",yellow:i.tagInfo.color==="yellow",red:i.tagInfo.color==="red",darkred:i.tagInfo.color==="darkred",green:i.tagInfo.color==="green",darkgreen:i.tagInfo.color==="darkgreen",purple:i.tagInfo.color==="purple"}])},[de(k(i.tagName)+" ",1),i.tagInfo.tooltipText?(p(),v("span",br,k(i.tagTooltip),1)):$("",!0)],2)):$("",!0)}const wr=fe(vr,[["render",yr]]);function pe(t){return{r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16),a:t.length>=9?parseInt(t.substring(7,9),16)/255:1}}function Mt(t){return t=Math.round(t).toString(16),t.length===1?`0${t}`:t}function mt(t){const e=Mt(t.r),n=Mt(t.g),s=Mt(t.b),o=t.a!==void 0?Mt(255*t.a):"";return`#${e}${n}${s}${o}`}function Ls({h:t,s:e,v:n}){if(e===0)return{r:255*n,g:255*n,b:255*n};t%=360,t<0&&(t+=360);const s=t/60,o=Math.floor(s),i=n*(1-e*(1-s+o)),r=n*(1-e*(s-o)),d=n*(1-e);switch(o){case 0:return{r:255*n,g:255*i,b:255*d};case 1:return{r:255*r,g:255*n,b:255*d};case 2:return{r:255*d,g:255*n,b:255*i};case 3:return{r:255*d,g:255*r,b:255*n};case 4:return{r:255*i,g:255*d,b:255*n};case 5:return{r:255*n,g:255*d,b:255*r}}}function rt({r:t,g:e,b:n}){t/=255,e/=255,n/=255;const s=Math.max(t,e,n),o=s-Math.min(t,e,n);if(o===0)return{h:0,s:0,v:s};const i=o/s,r=(s-t)/o,d=(s-e)/o,a=(s-n)/o;let c;return r?d?a||(c=4+d-r):c=2+r-a:c=a-d,{h:60*c%360,s:i,v:s}}function wn(t){const{r:e,g:n,b:s}=pe(t);return e*.299+n*.587+s*.114}function _r(t,e,n,s){return s=s!==void 0?s:170,typeof s!="number"&&(s=wn(s)),wn(t)>s?e!==void 0?e:"#575e75":n!==void 0?n:"#ffffff"}function xr(t,e){const{r:n,g:s,b:o,a:i}=pe(t);return e.r===void 0&&(e.r=1),e.g===void 0&&(e.g=1),e.b===void 0&&(e.b=1),e.a===void 0&&(e.a=1),mt({r:e.r*n,g:e.g*s,b:e.b*o,a:e.a*i})}function Sr(t,e){const{r:n,g:s,b:o,a:i}=pe(t);return e.r===void 0&&(e.r=1),e.g===void 0&&(e.g=1),e.b===void 0&&(e.b=1),e.a===void 0&&(e.a=1),mt({r:(1-e.r)*255+e.r*n,g:(1-e.g)*255+e.g*s,b:(1-e.b)*255+e.b*o,a:1-e.a+e.a*i})}function kr(t,e){const{r:n,g:s,b:o}=pe(t),{r:i,g:r,b:d,a}=pe(e);return mt({r:(1-a)*n+a*i,g:(1-a)*s+a*r,b:(1-a)*o+a*d})}function Er(t){return t.substring(0,7)}function Mr(t,e,n){const s=typeof t=="number"?t:rt(pe(t)).h,o=typeof t!="number"&&rt(pe(t)).s===0?0:typeof e=="number"?e:rt(pe(e)).s,i=typeof n=="number"?n:rt(pe(n)).v;return mt(Ls({h:s,s:o,v:i}))}function Cr(t){const{r:e,g:n,b:s}=pe(t);return`url("data:image/svg+xml,
    <svg xmlns='http://www.w3.org/2000/svg'>
      <filter id='recolor'>
        <feColorMatrix color-interpolation-filters='sRGB' values='
          0 0 0 0 ${e/255}
          0 0 0 0 ${n/255}
          0 0 0 0 ${s/255}
          0 0 0 1 0
        '/>
      </filter>
    </svg>#recolor
  ")`.split(`
`).join("")}globalThis.__scratchAddonsTextColor={parseHex:pe,convertToHex:mt,convertFromHsv:Ls,convertToHsv:rt,brightness:wn,textColor:_r,multiply:xr,brighten:Sr,alphaBlend:kr,removeAlpha:Er,makeHsv:Mr,recolorFilter:Cr};const{parseHex:Tc,convertToHex:Oc,convertFromHsv:Dc,convertToHsv:Ac,brightness:$c,textColor:re,multiply:Qe,brighten:Lc,alphaBlend:ns,removeAlpha:Pc,makeHsv:ss,recolorFilter:Nc}=globalThis.__scratchAddonsTextColor;const Ir={props:["options","settings","hoveredSettingId"],data(){return{tabs:[{id:"code",textLength:4},{id:"costumes",textLength:8},{id:"sounds",textLength:6}],selectedTab:"code",fullScreenView:!1,blockCategories:[{primary:"#4c97ff",tertiary:"#3373cc",textLength:[6]},{primary:"#9966ff",tertiary:"#774dcb",textLength:[5]},{primary:"#cf63cf",tertiary:"#bd42bd",textLength:[5]},{primary:"#ffd500",tertiary:"#cc9900",textLength:[6]},{primary:"#ffab19",tertiary:"#cf8b17",textLength:[7]},{primary:"#5cb1d6",tertiary:"#2e8eb8",textLength:[7]},{primary:"#59c059",tertiary:"#389438",textLength:[9]},{primary:"#ff8c1a",tertiary:"#db6e00",textLength:[9]},{primary:"#ff6680",tertiary:"#ff3355",textLength:[2,6]}],soundEffects:[{textLength:[6]},{textLength:[6]},{textLength:[6]},{textLength:[6]},{textLength:[4]},{textLength:[4,2]},{textLength:[4,3]},{textLength:[7]},{textLength:[7]}]}},computed:{colors(){return{primaryText:re(this.settings.primary),menuBarText:re(this.settings.menuBar),accentText:re(this.settings.accent),inputText:re(this.settings.input),categoryMenuText:re(this.settings.categoryMenu),selectorText:re(this.settings.selector),selector2Text:re(this.settings.selector2),pageText:re(this.settings.page,"rgba(87, 94, 117, 0.75)","rgba(255, 255, 255, 0.75)"),menuBarBorder:re(this.settings.menuBar,"rgba(0, 0, 0, 0.15)","rgba(255, 255, 255, 0.15)",60),accentTransparentText:re(this.settings.accent,"rgba(87, 94, 117, 0.75)","rgba(255, 255, 255, 0.75)"),accentArtboard:this.settings.affectPaper?this.settings.accent:"#ffffff",accentCheckerboard:this.settings.affectPaper?Qe(re(this.settings.accent,ns(this.settings.accent,Qe(ss(this.settings.primary,1,.67),{a:.15})),ns(this.settings.accent,Qe(ss(this.settings.primary,.5,1),{a:.15})),112),{a:.55}):"#d9e3f28c",tabText:re(this.settings.tab,"rgba(87, 94, 117, 0.75)","rgba(255, 255, 255, 0.75)"),categoryMenuSelection:re(this.settings.categoryMenu,"rgba(87, 124, 155, 0.13)","rgba(255, 255, 255, 0.05)"),primaryTransparent:Qe(this.settings.primary,{a:.35}),inputTransparent:Qe(this.settings.input,{a:.25})}}},methods:{selectTab(t){this.selectedTab=t,this.$emit("areahover","activeTab")},toggleFullScreenView(){this.fullScreenView=!this.fullScreenView},cssVariables(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join(`
`)}}},Tr=["data-setting-hovered"],Or=Ie('<div class="edm-logo-placeholder"></div><div class="edm-menu-bar-menu edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-menu-bar-menu edm-text-placeholder" style="--length:4;"></div><div class="edm-menu-bar-menu edm-text-placeholder" style="--length:4;"></div><div class="edm-menu-bar-separator"></div><div class="edm-menu-bar-menu edm-menu-bar-tutorials"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div><div class="edm-text-placeholder" style="--length:9;"></div></div><div class="edm-menu-bar-separator"></div><div class="edm-menu-bar-input"><div class="edm-text-placeholder" style="--length:8;"></div><div class="edm-text-placeholder" style="--length:1;"></div></div><div class="edm-menu-bar-button edm-menu-bar-share"><div class="edm-text-placeholder" style="--length:5;"></div></div><div class="edm-menu-bar-button"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div><div class="edm-text-placeholder" style="--length:3;"></div><div class="edm-text-placeholder" style="--length:7;"></div><div class="edm-text-placeholder" style="--length:4;"></div></div><div class="edm-spacer"></div><div class="edm-menu-bar-menu edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-menu-bar-menu"><div class="edm-menu-bar-button edm-avatar-placeholder"></div><div class="edm-text-placeholder" style="--length:10;"></div></div>',13),Dr=[Or],Ar={class:"edm-main"},$r={class:"edm-left"},Lr={class:"edm-tabs"},Pr=["onMouseenter","onClick"],Nr=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Fr={key:0,class:"edm-tab-content edm-workspace"},Rr={class:"edm-category-label"},jr=l("div",{class:"edm-spacer"},null,-1),Br=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),zr=[Br],Ur=l("div",{class:"edm-asset-image"},[l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"})],-1),Hr=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"7"}},null,-1),Wr=[Hr],Vr=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Gr=[Vr],Xr=Ie('<div class="edm-asset edm-asset"><div class="edm-asset-image"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div></div><div class="edm-asset-name"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div></div><div class="edm-asset edm-asset"><div class="edm-asset-image"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div></div><div class="edm-asset-name"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:3;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div></div></div>',2),Yr=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),Kr=[Yr],qr={key:0,class:"edm-asset-editor edm-tool-button-icons-not-affected"},Jr={class:"edm-toolbar"},Zr=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"7"}},null,-1),Qr=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"8"}},null,-1),ea=[Qr],ta=Ie('<div><div class="edm-outlined-button edm-outlined-button-first edm-outlined-button-selected"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div><div class="edm-outlined-button edm-outlined-button-last edm-outlined-button-selected"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:6;"></div></div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:8;"></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:7;"></div></div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:8;"></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div></div></div>',6),na={class:"edm-toolbar"},sa=l("div",null,[l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"4"}}),l("div",{class:"edm-outlined-button edm-outlined-button-first edm-paint-picker-color"}),l("div",{class:"edm-outlined-button edm-outlined-button-last edm-paint-picker-arrow"})],-1),oa=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"7"}},null,-1),ia=l("div",{class:"edm-outlined-button edm-outlined-button-first edm-paint-picker-color"},null,-1),ra=l("div",{class:"edm-outlined-button edm-outlined-button-last edm-paint-picker-arrow"},null,-1),aa=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"2"}},null,-1),la=[aa],da=Ie('<div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div></div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:6;"></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:10;"></div></div></div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:8;"></div></div></div></div>',6),ca={class:"edm-paint-bottom"},ua={class:"edm-paint-tool-column"},ha=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),ga=[ha],ma={class:"edm-paint-tool"},pa=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),fa=[pa],va={class:"edm-paint-tool-column"},ba={class:"edm-paint-tool"},ya=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),wa=[ya],_a={class:"edm-paint-canvas-and-controls"},xa=l("div",{class:"edm-paint-canvas"},null,-1),Sa={class:"edm-paint-controls"},ka=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Ea=l("div",{class:"edm-text-placeholder",style:{"--length":"7"}},null,-1),Ma=l("div",{class:"edm-text-placeholder",style:{"--length":"2"}},null,-1),Ca=l("div",{class:"edm-text-placeholder",style:{"--length":"6"}},null,-1),Ia=[ka,Ea,Ma,Ca],Ta=Ie('<div class="edm-paint-zoom"><div class="edm-outlined-button edm-outlined-button-first"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div><div class="edm-outlined-button edm-outlined-button-middle"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div><div class="edm-outlined-button edm-outlined-button-last"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div></div>',1),Oa={key:1,class:"edm-asset-editor"},Da={class:"edm-toolbar"},Aa=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"5"}},null,-1),$a=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"4"}},null,-1),La=[$a],Pa=Ie('<div><div class="edm-outlined-button edm-outlined-button-first edm-outlined-button-selected"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div><div class="edm-outlined-button edm-outlined-button-last edm-outlined-button-selected"><div class="edm-icon-placeholder edm-icon-placeholder-20px"></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div></div></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:4;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:2;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:3;"></div></div></div></div><div class="edm-toolbar-separator"></div><div><div class="edm-tool-button"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:6;"></div></div></div>',7),Na=l("div",{class:"edm-waveform"},null,-1),Fa={class:"edm-toolbar edm-sound-effects"},Ra=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),ja=[Ra],Ba=l("div",{class:"edm-toolbar-separator"},null,-1),za={class:"edm-tool-button"},Ua=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Ha=l("div",{class:"edm-text-placeholder",style:{"--length":"8"}},null,-1),Wa=[Ha],Va={class:"edm-right"},Ga={class:"edm-stage-header"},Xa=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px edm-green-flag"},null,-1),Ya=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px edm-stop-sign"},null,-1),Ka=l("div",{class:"edm-spacer"},null,-1),qa=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Ja=[qa],Za=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),Qa=[Za],el=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),tl=[el],nl={class:"edm-targets"},sl={class:"edm-sprite-selector"},ol=Ie('<div class="edm-sprite-info-row"><div><div class="edm-input"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:7;"></div></div></div></div><div class="edm-sprite-info-row"><div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div><div class="edm-input edm-input-number"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div></div></div><div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div><div class="edm-input edm-input-number"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div></div></div></div>',2),il=[ol],rl={class:"edm-sprite-list"},al=l("div",{class:"edm-asset-image"},[l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"})],-1),ll=l("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:{"--length":"7"}},null,-1),dl=[ll],cl=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),ul=[cl],hl=Ie('<div class="edm-asset edm-asset"><div class="edm-asset-image"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div></div><div class="edm-asset-name"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div></div><div class="edm-asset edm-asset"><div class="edm-asset-image"><div class="edm-icon-placeholder edm-icon-placeholder-24px"></div></div><div class="edm-asset-name"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:3;"></div><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div></div></div>',2),gl=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),ml=[gl],pl=Ie('<div class="edm-stage-title"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:5;"></div></div><div class="edm-stage-image"></div><div class="edm-stage-info"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:9;"></div></div><div class="edm-stage-info"><div class="edm-text-placeholder edm-text-placeholder-small" style="--length:1;"></div></div>',4),fl=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-24px"},null,-1),vl=[fl],bl={class:"edm-fullscreen-controls-inner"},yl=l("div",null,[l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px edm-green-flag"}),l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px edm-stop-sign"})],-1),wl=l("div",{class:"edm-icon-placeholder edm-icon-placeholder-20px"},null,-1),_l=[wl];function xl(t,e,n,s,o,i){return p(),v("div",{role:"presentation",class:"edm-preview","data-setting-hovered":n.hoveredSettingId,onMouseenter:e[71]||(e[71]=r=>t.$emit("areahover","page")),onMouseleave:e[72]||(e[72]=r=>t.$emit("areahover",null)),style:ye(i.cssVariables({"--page":n.settings.page,"--page-text":i.colors.pageText,"--primary":n.settings.primary,"--primary-transparent":i.colors.primaryTransparent,"--primary-text":i.colors.primaryText,"--highlightText":n.settings.highlightText,"--menuBar":n.settings.menuBar,"--menuBar-text":i.colors.menuBarText,"--menuBar-border":i.colors.menuBarBorder,"--accent":n.settings.accent,"--accent-text":i.colors.accentText,"--accent-transparentText":i.colors.accentTransparentText,"--accent-artboard":i.colors.accentArtboard,"--accent-checkerboard":i.colors.accentCheckerboard,"--input":n.settings.input,"--input-transparent":i.colors.inputTransparent,"--input-text":i.colors.inputText,"--tab":n.settings.tab,"--tab-text":i.colors.tabText,"--activeTab":n.settings.activeTab,"--workspace":n.settings.workspace,"--categoryMenu":n.settings.categoryMenu,"--categoryMenu-text":i.colors.categoryMenuText,"--categoryMenu-selection":i.colors.categoryMenuSelection,"--palette":n.settings.palette,"--selector":n.settings.selector,"--selector-text":i.colors.selectorText,"--selector2":n.settings.selector2,"--selector2-text":i.colors.selector2Text,"--selectorSelection":n.settings.selectorSelection,"--fullscreen":n.settings.fullscreen,"--stageHeader":n.settings.stageHeader,"--border":n.hoveredSettingId==="border"?"var(--orange)":n.settings.border}))},[l("div",{class:"edm-menu-bar",onMouseenter:e[0]||(e[0]=r=>t.$emit("areahover","menuBar")),onMouseleave:e[1]||(e[1]=r=>t.$emit("areahover","page"))},Dr,32),l("div",Ar,[l("div",$r,[l("div",Lr,[(p(!0),v(z,null,X(o.tabs,r=>(p(),v("div",{class:U(["edm-tab",{"edm-tab-selected":o.selectedTab===r.id}]),onMouseenter:d=>t.$emit("areahover",o.selectedTab===r.id?"activeTab":"tab"),onMouseleave:e[2]||(e[2]=d=>t.$emit("areahover","page")),onClick:d=>i.selectTab(r.id)},[Nr,l("div",{class:"edm-text-placeholder",style:ye(i.cssVariables({"--length":r.textLength}))},null,4)],42,Pr))),256))]),o.selectedTab==="code"?(p(),v("div",Fr,[l("div",{class:"edm-category-menu",onMouseenter:e[5]||(e[5]=r=>t.$emit("areahover","categoryMenu")),onMouseleave:e[6]||(e[6]=r=>t.$emit("areahover","page"))},[(p(!0),v(z,null,X(o.blockCategories,r=>(p(),v("div",{class:U(["edm-category",{"edm-category-selected":t.$index===0}])},[l("div",{class:"edm-category-bubble",style:ye({backgroundColor:r.primary,borderColor:r.tertiary})},null,4),l("div",Rr,[(p(!0),v(z,null,X(r.textLength,d=>(p(),v("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:ye(i.cssVariables({"--length":d}))},null,4))),256))])],2))),256)),jr,l("div",{class:"edm-add-extension",onMouseenter:e[3]||(e[3]=r=>t.$emit("areahover","primary")),onMouseleave:e[4]||(e[4]=r=>t.$emit("areahover","categoryMenu"))},zr,32)],32),l("div",{class:"edm-palette",onMouseenter:e[7]||(e[7]=r=>t.$emit("areahover","palette")),onMouseleave:e[8]||(e[8]=r=>t.$emit("areahover","page"))},null,32),l("div",{class:"edm-workspace-hover-target",onMouseenter:e[9]||(e[9]=r=>t.$emit("areahover","workspace")),onMouseleave:e[10]||(e[10]=r=>t.$emit("areahover","page"))},null,32)])):(p(),v("div",{key:1,class:"edm-tab-content edm-asset-tab",onMouseenter:e[33]||(e[33]=r=>t.$emit("areahover","accent")),onMouseleave:e[34]||(e[34]=r=>t.$emit("areahover","page"))},[l("div",{class:U(["edm-asset-list",{"edm-sound-list":o.selectedTab==="sounds"}]),onMouseenter:e[19]||(e[19]=r=>t.$emit("areahover","selector2")),onMouseleave:e[20]||(e[20]=r=>t.$emit("areahover","accent"))},[l("div",{class:"edm-asset edm-asset-selected",onMouseenter:e[15]||(e[15]=r=>t.$emit("areahover","selectorSelection")),onMouseleave:e[16]||(e[16]=r=>t.$emit("areahover","selector2"))},[Ur,l("div",{class:"edm-asset-name",onMouseenter:e[11]||(e[11]=r=>t.$emit("areahover","primary")),onMouseleave:e[12]||(e[12]=r=>t.$emit("areahover","selectorSelection"))},Wr,32),l("div",{class:"edm-asset-delete",onMouseenter:e[13]||(e[13]=r=>t.$emit("areahover","primary")),onMouseleave:e[14]||(e[14]=r=>t.$emit("areahover","selectorSelection"))},Gr,32)],32),Xr,l("div",{class:"edm-asset-new",onMouseenter:e[17]||(e[17]=r=>t.$emit("areahover","primary")),onMouseleave:e[18]||(e[18]=r=>t.$emit("areahover","selector2"))},Kr,32)],34),o.selectedTab==="costumes"?(p(),v("div",qr,[l("div",Jr,[l("div",null,[Zr,l("div",{class:"edm-input",onMouseenter:e[21]||(e[21]=r=>t.$emit("areahover","input")),onMouseleave:e[22]||(e[22]=r=>t.$emit("areahover","accent"))},ea,32)]),ta]),l("div",na,[sa,l("div",null,[oa,ia,ra,l("div",{class:"edm-input edm-input-number",onMouseenter:e[23]||(e[23]=r=>t.$emit("areahover","input")),onMouseleave:e[24]||(e[24]=r=>t.$emit("areahover","accent"))},la,32)]),da]),l("div",ca,[l("div",ua,[l("div",{class:"edm-paint-tool edm-paint-tool-selected",onMouseenter:e[25]||(e[25]=r=>t.$emit("areahover","primary")),onMouseleave:e[26]||(e[26]=r=>t.$emit("areahover","accent"))},ga,32),(p(),v(z,null,X([0,1,2,3],r=>l("div",ma,fa)),64))]),l("div",va,[(p(),v(z,null,X([0,1,2,3],r=>l("div",ba,wa)),64))]),l("div",_a,[xa,l("div",Sa,[l("div",{class:"edm-button",onMouseenter:e[27]||(e[27]=r=>t.$emit("areahover","primary")),onMouseleave:e[28]||(e[28]=r=>t.$emit("areahover","accent"))},Ia,32),Ta])])])])):$("",!0),o.selectedTab==="sounds"?(p(),v("div",Oa,[l("div",Da,[l("div",null,[Aa,l("div",{class:"edm-input",onMouseenter:e[29]||(e[29]=r=>t.$emit("areahover","input")),onMouseleave:e[30]||(e[30]=r=>t.$emit("areahover","accent"))},La,32)]),Pa]),Na,l("div",Fa,[l("div",null,[l("div",{class:"edm-play-button",onMouseenter:e[31]||(e[31]=r=>t.$emit("areahover","primary")),onMouseleave:e[32]||(e[32]=r=>t.$emit("areahover","accent"))},ja,32)]),Ba,l("div",null,[(p(!0),v(z,null,X(o.soundEffects,r=>(p(),v("div",za,[Ua,l("div",null,[(p(!0),v(z,null,X(r.textLength,d=>(p(),v("div",{class:"edm-text-placeholder edm-text-placeholder-small",style:ye(i.cssVariables({"--length":d}))},null,4))),256))])]))),256))])])])):$("",!0)],32)),l("div",{class:"edm-backpack",onMouseenter:e[35]||(e[35]=r=>t.$emit("areahover","accent")),onMouseleave:e[36]||(e[36]=r=>t.$emit("areahover","page"))},Wa,32)]),l("div",Va,[l("div",Ga,[Xa,Ya,Ka,l("div",{class:"edm-outlined-button edm-outlined-button-first edm-outlined-button-selected",onMouseenter:e[37]||(e[37]=r=>t.$emit("areahover","accent")),onMouseleave:e[38]||(e[38]=r=>t.$emit("areahover","page"))},Ja,32),l("div",{class:"edm-outlined-button edm-outlined-button-last edm-outlined-button-unselected",onMouseenter:e[39]||(e[39]=r=>t.$emit("areahover","accent")),onMouseleave:e[40]||(e[40]=r=>t.$emit("areahover","page"))},Qa,32),l("div",{class:"edm-outlined-button edm-fullscreen-toggle",onMouseenter:e[41]||(e[41]=r=>t.$emit("areahover","accent")),onMouseleave:e[42]||(e[42]=r=>t.$emit("areahover","page")),onClick:e[43]||(e[43]=r=>i.toggleFullScreenView())},tl,32)]),l("div",{class:"edm-stage",onMouseenter:e[44]||(e[44]=r=>t.$emit("areahover",null)),onMouseleave:e[45]||(e[45]=r=>t.$emit("areahover","page"))},null,32),l("div",nl,[l("div",sl,[l("div",{class:"edm-sprite-info",onMouseenter:e[46]||(e[46]=r=>t.$emit("areahover","accent")),onMouseleave:e[47]||(e[47]=r=>t.$emit("areahover","page"))},il,32),l("div",{class:"edm-sprite-list-container",onMouseenter:e[56]||(e[56]=r=>t.$emit("areahover","selector")),onMouseleave:e[57]||(e[57]=r=>t.$emit("areahover","page"))},[l("div",rl,[l("div",{class:"edm-asset edm-asset-selected",onMouseenter:e[52]||(e[52]=r=>t.$emit("areahover","selectorSelection")),onMouseleave:e[53]||(e[53]=r=>t.$emit("areahover","selector"))},[al,l("div",{class:"edm-asset-name",onMouseenter:e[48]||(e[48]=r=>t.$emit("areahover","primary")),onMouseleave:e[49]||(e[49]=r=>t.$emit("areahover","selectorSelection"))},dl,32),l("div",{class:"edm-asset-delete",onMouseenter:e[50]||(e[50]=r=>t.$emit("areahover","primary")),onMouseleave:e[51]||(e[51]=r=>t.$emit("areahover","selectorSelection"))},ul,32)],32),hl]),l("div",{class:"edm-asset-new",onMouseenter:e[54]||(e[54]=r=>t.$emit("areahover","primary")),onMouseleave:e[55]||(e[55]=r=>t.$emit("areahover","selector"))},ml,32)],32)]),l("div",{class:"edm-stage-selector",onMouseenter:e[60]||(e[60]=r=>t.$emit("areahover","accent")),onMouseleave:e[61]||(e[61]=r=>t.$emit("areahover","page"))},[pl,l("div",{class:"edm-asset-new",onMouseenter:e[58]||(e[58]=r=>t.$emit("areahover","primary")),onMouseleave:e[59]||(e[59]=r=>t.$emit("areahover","accent"))},vl,32)],32)])])]),o.fullScreenView?(p(),v("div",{key:0,class:"edm-fullscreen-view",onMouseenter:e[69]||(e[69]=r=>t.$emit("areahover","fullscreen")),onMouseleave:e[70]||(e[70]=r=>t.$emit("areahover","page"))},[l("div",{class:"edm-fullscreen-controls",onMouseenter:e[65]||(e[65]=r=>t.$emit("areahover","stageHeader")),onMouseleave:e[66]||(e[66]=r=>t.$emit("areahover","fullscreen"))},[l("div",bl,[yl,l("div",{class:"edm-outlined-button edm-fullscreen-toggle",onMouseenter:e[62]||(e[62]=r=>t.$emit("areahover","accent")),onMouseleave:e[63]||(e[63]=r=>t.$emit("areahover","stageHeader")),onClick:e[64]||(e[64]=r=>i.toggleFullScreenView())},_l,32)])],32),l("div",{class:"edm-fullscreen-stage",onMouseenter:e[67]||(e[67]=r=>t.$emit("areahover",null)),onMouseleave:e[68]||(e[68]=r=>t.$emit("areahover","fullscreen"))},null,32)],32)):$("",!0)],44,Tr)}const Sl=fe(Ir,[["render",xl]]);const kl={props:["options","settingData","settings"],methods:{settingName(t){return this.settingData.find(e=>e.id===t).name}}},El={class:"preset-palette"},Ml=["title"];function Cl(t,e,n,s,o,i){return p(),v("span",El,[(p(!0),v(z,null,X(n.options.colors,r=>(p(),v("span",{style:ye({backgroundColor:n.settings[r]}),title:i.settingName(r)+": "+n.settings[r]},null,12,Ml))),256))])}const Il=fe(kl,[["render",Cl]]);const Ct=window.parent!==window,Tl={components:{AddonTag:wr,AddonSetting:pr,EditorDarkMode:Sl,PreviewPalette:Il},props:["addon","groupId","groupExpanded","visible"],data(){return{isIframe:Ct,expanded:this.getDefaultExpanded(),everExpanded:this.getDefaultExpanded(),hoveredSettingId:null,highlightedSettingId:null}},computed:{shouldShow(){return this.visible&&(this.$root.searchInput===""?this.groupExpanded:!0)},addonIconSrc(){return`../../../images/icons/${{editor:"puzzle",community:"web",theme:"brush",easterEgg:"egg-easter",popup:"popup"}[this.addon._icon]}.svg`},addonSettings(){return this.$root.addonSettings[this.addon._addonId]},showUpdateNotice(){if(!this.addon.latestUpdate||!this.addon.latestUpdate.temporaryNotice)return!1;const[t,e,n]=this.$root.version.split("."),[s,o,i]=this.addon.latestUpdate.version.split(".");return t===s&&e===o}},methods:{getDefaultExpanded(){return Ct?!1:this.groupId==="enabled"},devShowAddonIds(t){!this.$root.versionName.endsWith("-prerelease")||!t.ctrlKey||(t.stopPropagation(),Vue.set(this.addon,"_displayedAddonId",this.addon._addonId))},loadPreset(t){if(window.confirm(chrome.i18n.getMessage("confirmPreset"))){for(const e of Object.keys(t.values))this.addonSettings[e]=t.values[e];this.$root.updateSettings(this.addon),console.log(`Loaded preset ${t.id} for ${this.addon._addonId}`)}},loadDefaults(){if(window.confirm(chrome.i18n.getMessage("confirmReset"))){for(const t of this.addon.settings)this.addonSettings[t.id]=JSON.parse(JSON.stringify(t.default));this.$root.updateSettings(this.addon),console.log(`Loaded default values for ${this.addon._addonId}`)}},toggleAddonRequest(t){const e=()=>{t.preventDefault();const s=!this.addon._enabled;this.addon._wasEverEnabled=this.addon._enabled||s,this.addon._enabled=s,this.expanded=Ct&&!this.expanded&&(this.addon.info||[]).every(o=>o.type!=="warning")||t.shiftKey?!1:s,chrome.runtime.sendMessage({changeEnabledState:{addonId:this.addon._addonId,newState:s}}),Pe.$emit(`toggle-addon-request-${this.addon.id}`,s)},n=(this.addon.permissions||[]).filter(s=>this.$root.browserLevelPermissions.includes(s));!this.addon._enabled&&this.addon.tags.includes("danger")&&!confirm(chrome.i18n.getMessage("dangerWarning",[this.addon.name]))||(!this.addon._enabled&&n.length&&n.every(o=>this.$root.grantedOptionalPermissions.includes(o))===!1?Ct?(this.$root.addonToEnable=this.addon,document.querySelector(".popup").style.animation="dropDown 0.35s 1",this.$root.showPopupModal=!0):chrome.permissions.request({permissions:n},o=>{o&&(console.log("Permissions granted!"),e())}):e())},highlightSetting(t){this.highlightedSettingId=t},msg(...t){return this.$root.msg(...t)}},watch:{groupId(t){this.expanded=this.getDefaultExpanded()},searchInput(t){t===""?this.expanded=this.getDefaultExpanded():this.expanded=!1},expanded(t){t===!0&&(this.everExpanded=!0)}},mounted(){const t=()=>{location.hash.replace(/^#addon-/,"")===this.addon._addonId&&(this.expanded=!0)};window.addEventListener("hashchange",t,{capture:!1}),setTimeout(t,0)}},Ol=["id"],Dl={class:"addon-topbar"},Al={class:"btn-dropdown"},$l={class:"addon-name"},Ll=["src"],Pl={class:"addon-check"},Nl=l("img",{src:$s,class:"icon-type"},null,-1),Fl=[Nl],Rl=["state"],jl={key:0,class:"addon-settings"},Bl={class:"addon-description-full"},zl={key:0,class:"addon-message addon-update"},Ul={id:"info"},Hl=["src"],Wl={key:1,class:"addon-credits"},Vl={key:0},Gl=["href"],Xl={key:1},Yl={key:2},Kl={key:2,class:"addon-license"},ql=["href"],Jl={class:"setting-label"},Zl={class:"setting-label"},Ql={class:"addon-setting"},ed=["disabled","onClick","title"],td={class:"preset-preview"};function nd(t,e,n,s,o,i){const r=me("addon-tag"),d=me("addon-setting");return j((p(),v("div",{class:"addon-body",id:"addon-"+n.addon._addonId},[l("div",Dl,[l("div",{class:"clickable-area",onClick:e[1]||(e[1]=a=>o.expanded=!o.expanded)},[l("div",Al,[l("img",{src:zt,alt:"v",class:U({reverted:o.expanded})},null,2)]),l("div",$l,[l("img",{src:i.addonIconSrc,class:"icon-type"},null,8,Ll),l("span",{onClick:e[0]||(e[0]=(...a)=>i.devShowAddonIds&&i.devShowAddonIds(...a))},k(n.addon._displayedAddonId||n.addon.name),1)]),(p(!0),v(z,null,X(n.addon.tags,a=>(p(),we(r,{tag:a},null,8,["tag"]))),256))]),j(l("div",{class:"addon-description",dir:"auto"},k(n.addon.description),513),[[ee,!o.expanded]]),l("div",Pl,[n.addon.settings?j((p(),v("div",{key:0,class:"addon-buttons",title:"{{ msg('resetToDefault') }}",onClick:e[2]||(e[2]=(...a)=>i.loadDefaults&&i.loadDefaults(...a))},Fl,512)),[[ee,o.expanded&&n.addon._enabled]]):$("",!0),l("div",{class:"switch",state:n.addon._enabled?"on":"off",onClick:e[3]||(e[3]=(...a)=>i.toggleAddonRequest&&i.toggleAddonRequest(...a))},null,8,Rl)])]),o.everExpanded?j((p(),v("div",jl,[l("div",Bl,k(n.addon.description),1),i.showUpdateNotice?(p(),v("div",zl,[Pt(r,{tag:"new"}),de(" "+k(n.addon.latestUpdate.temporaryNotice),1)])):$("",!0),(p(!0),v(z,null,X(n.addon.info,a=>(p(),v("div",Ul,[l("div",{class:U(["addon-message","addon-"+(a.type||"info")])},[l("img",{src:"../../../images/icons/"+{warning:"warning.svg",notice:"notice.svg",info:"help.svg"}[a.type||"info"]},null,8,Hl),de(k(a.text),1)],2)]))),256)),n.addon.credits?(p(),v("div",Wl,[l("span",null,k(i.msg("creditTo")),1),(p(!0),v(z,null,X(n.addon.credits,a=>(p(),v("span",null,[a.link?(p(),v("span",Vl,[l("a",{href:a.link,rel:"noreferrer noopener",target:"_blank"},k(a.name),9,Gl)])):(p(),v("span",Xl,k(a.name),1)),a.note?(p(),v("span",Yl," ("+k(a.note)+")",1)):$("",!0)]))),256))])):$("",!0),n.addon.libraries&&n.addon.libraries.length?(p(),v("div",Kl,[l("a",{target:"_blank",href:`./licenses.html?libraries=${n.addon.libraries.join(",")}`},k(i.msg("viewLicenses")),9,ql)])):$("",!0),n.addon.addonPreview&&!o.isIframe?(p(),v("div",{key:3,class:U(["preview-column",[n.addon._enabled?"":"disabled"]])},[l("div",Jl,k(i.msg("preview")),1),(p(),we(Ln(n.addon.addonPreview.type),{options:n.addon.addonPreview,settings:i.addonSettings,"hovered-setting-id":o.hoveredSettingId,onAreahover:i.highlightSetting},null,40,["options","settings","hovered-setting-id","onAreahover"]))],2)):$("",!0),l("div",{class:U(["settings-column",[n.addon._enabled?"":"disabled"]])},[(p(!0),v(z,null,X(n.addon.settings,a=>(p(),we(d,{class:U({"setting-highlighted":o.highlightedSettingId===a.id}),addon:n.addon,setting:a,"addon-settings":i.addonSettings,onMouseenter:c=>o.hoveredSettingId=a.id,onMouseleave:e[4]||(e[4]=c=>o.hoveredSettingId=null)},null,8,["class","addon","setting","addon-settings","onMouseenter"]))),256))],2),n.addon.presets?(p(),v("div",{key:4,class:U(["presets-column",[n.addon._enabled?"":"disabled"]])},[l("div",Zl,k(i.msg("presets")),1),(p(!0),v(z,null,X(n.addon.presets,a=>(p(),v("div",Ql,[l("button",{type:"preset-button",class:"large-button",disabled:!n.addon._enabled,onClick:c=>i.loadPreset(a),title:a.description},[l("span",td,[n.addon.presetPreview?(p(),we(Ln("preview-"+n.addon.presetPreview.type),{key:0,options:n.addon.presetPreview,"setting-data":n.addon.settings,settings:a.values},null,8,["options","setting-data","settings"])):$("",!0)]),l("span",null,k(a.name),1)],8,ed)]))),256))],2)):$("",!0)],512)),[[ee,o.expanded]]):$("",!0)],8,Ol)),[[ee,i.shouldShow]])}const sd=fe(Tl,[["render",nd]]);const od={props:["group","shownCount","marginAbove"],data(){return{}},computed:{shouldShow(){return this.$root.searchInput!==""?!1:this.shownCount>0},manifestsById(){return this.$root.manifestsById}},methods:{toggle(){this.group.expanded=!this.group.expanded}}};function id(t,e,n,s,o,i){return j((p(),v("div",{class:U(["addon-group",{"margin-above":n.marginAbove}]),onClick:e[0]||(e[0]=(...r)=>i.toggle&&i.toggle(...r))},[l("img",{src:zt,alt:"v",class:U({reverted:n.group.expanded})},null,2),de(" "+k(n.group.name)+" ("+k(n.shownCount)+") ",1)],2)),[[ee,i.shouldShow]])}const rd=fe(od,[["render",id]]);const ad={props:["category"],data(){return{lastClick:0}},computed:{selectedCategory(){return this.$root.selectedCategory},shouldShow(){const t=this.$root.categories.filter(e=>e.parent===this.category.parent).map(e=>e.id);return!this.category.parent||[this.category.parent,...t].includes(this.selectedCategory)}},methods:{onClick(t){t.stopPropagation(),this.selectedCategory===this.category.id&&!this.category.parent&&Date.now()-this.lastClick>350?this.$root.selectedCategory="all":this.$root.selectedCategory=this.category.id,this.lastClick=Date.now()}}},ld=["src"];function dd(t,e,n,s,o,i){return j((p(),v("div",{class:U(["category",{sel:n.category.id===i.selectedCategory,hasParent:n.category.parent}]),transition:"expand",style:ye({marginBottom:n.category.marginBottom?"12px":0}),onClick:e[0]||(e[0]=r=>i.onClick(r))},[l("img",{src:"../../../images/icons/"+n.category.icon+".svg"},null,8,ld),l("span",null,k(n.category.name),1)],6)),[[ee,i.shouldShow]])}const cd=fe(ad,[["render",dd]]),ud="/webpages/dist/assets/users.svg",Ps="/webpages/dist/assets/translate.svg",hd="/webpages/dist/assets/comment.svg",gd="/webpages/dist/assets/wrench.svg",md="/webpages/dist/assets/left-arrow.svg",pd="/webpages/dist/assets/theme.svg",fd="/webpages/dist/assets/import-export.svg",Tn=["notifications"];typeof browser<"u"&&Tn.push("clipboardWrite");let Ns=[];const On=()=>chrome.permissions.getAll(({permissions:t})=>{Ns=t.filter(e=>Tn.includes(e))});On();var is;(is=chrome.permissions.onAdded)==null||is.addListener(On);var rs;(rs=chrome.permissions.onRemoved)==null||rs.addListener(On);let cn,os,Xe=!1;window.parent!==window&&(document.body.classList.add("iframe"),Xe=!0);const vd={components:{Modal:ko,AddonBody:sd,AddonGroupHeader:rd,CategorySelector:cd},data(){return{bus:Pe,smallMode:!1,forceEnglishSetting:null,forceEnglishSettingInitial:null,switchPath:"../../images/icons/switch.svg",moreSettingsOpen:!1,categoryOpen:!0,loaded:!1,searchLoaded:!1,manifests:[],manifestsById:{},selectedCategory:"all",searchInput:"",searchInputReal:"",addonSettings:{},addonToEnable:null,showPopupModal:!1,isIframe:Xe,addonGroups:zn.filter(t=>Xe?t.iframeShow:t.fullscreenShow),categories:ao,searchMsg:this.msg("search"),browserLevelPermissions:Tn,grantedOptionalPermissions:Ns,addonListObjs:[],sidebarUrls:(()=>{const t=chrome.i18n.getUILanguage(),e=t.startsWith("en")?"":`${t.split("-")[0]}/`,n=chrome.runtime.getManifest().version,s=chrome.runtime.getManifest().version_name,o=`utm_source=extension&utm_medium=settingspage&utm_campaign=v${n}`;return{contributors:`https://scratchaddons.com/${e}credits?${o}`,feedback:`https://scratchaddons.com/${e}feedback/?ext_version=${s}&${o}`,changelog:`https://scratchaddons.com/${e}changelog?${o}`}})()}},created(){chrome.runtime.sendMessage("getSettingsInfo",async({manifests:t,addonsEnabled:e,addonSettings:n})=>{var h,g;this.addonSettings=n;const s=[];let o;Xe&&(o=await fo());const i=u=>JSON.parse(JSON.stringify(u));for(const{manifest:u,addonId:f}of t){u._categories=[],u._categories[0]=u.tags.includes("popup")?"popup":u.tags.includes("easterEgg")?"easterEgg":u.tags.includes("theme")?"theme":u.tags.includes("community")?"community":"editor";const b=w=>{let I=0;for(const O of w){const L=typeof O=="object"?O.tag:O,W=typeof O=="object"?O.category:L;u.tags.includes(L)&&(u._categories.push(W),I++)}return I};if(u._categories[0]==="theme"?b([{tag:"editor",category:"themesForEditor"}])||b([{tag:"community",category:"themesForWebsite"}]):u._categories[0]==="editor"?b(["codeEditor","costumeEditor","projectPlayer"])===0&&u._categories.push("editorOthers"):u._categories[0]==="community"&&b(["profiles","projectPage","forums"])===0&&u._categories.push("communityOthers"),f==="cat-blocks"&&u._categories.push("easterEgg"),u._icon=u._categories[0],u._enabled=e[f],u._wasEverEnabled=u._enabled,u._addonId=f,u._groups=[],u.versionAdded){const[w,I,O]=this.version.split("."),[L,W,J]=u.versionAdded.split("."),R=u.versionAdded==="1.33.0";!R&&w===L&&I===W?(u.tags.push("new"),u._groups.push(u.tags.includes("recommended")||u.tags.includes("featured")?"featuredNew":"new")):R&&(u.tags.push("new"),u._groups.push("new"))}if(u.latestUpdate){const[w,I,O]=this.version.split("."),[L,W,J]=u.latestUpdate.version.split(".");w===L&&I===W&&(u.tags.push((h=u.latestUpdate.newSettings)!=null&&h.length?"updatedWithSettings":"updated"),u._groups.push(u.latestUpdate.isMajor?"featuredNew":"new"))}const E=fs.map(w=>w.matchName);u.tags.sort((w,I)=>E.indexOf(w)-E.indexOf(I)),o!=null&&o.addonsCurrentlyOnTab.includes(f)?u._groups.push("runningOnTab"):o!=null&&o.addonsPreviouslyOnTab.includes(f)&&u._groups.push("recentlyUsed"),u._enabled?u._groups.push("enabled"):u.tags.includes("recommended")?u._groups.push("recommended"):u.tags.includes("featured")?u._groups.push("featured"):u.tags.includes("beta")||u.tags.includes("danger")?u._groups.push("beta"):u.tags.includes("forums")?u._groups.push("forums"):u._groups.push("others");for(const w of u._groups)(g=this.addonGroups.find(I=>I.id===w))==null||g.addonIds.push(u._addonId);s.push(i(u))}for(const{manifest:u}of t)this.manifestsById[u._addonId]=u;this.manifests=t.map(({manifest:u})=>u),cn=new nt(s,co);const r=(u,f,b)=>{const E=Array.isArray(u)?u:[u],w=E.some(O=>f.tags.includes(O)),I=E.some(O=>b.tags.includes(O));return w^I?I-w:w&&I?f.name.localeCompare(b.name):null},d=[["danger","beta"],"editor","community","popup"];if(this.addonGroups.forEach(u=>{u.addonIds=u.addonIds.map(f=>this.manifestsById[f]).sort((f,b)=>{for(const E of u.customOrder||d){const w=r(E,f,b);if(w!==null)return w}return 0}).map(f=>f._addonId)}),Xe){const u=[];for(const b of this.addonGroups)b.addonIds.forEach(E=>u.push(E));const f=this.addonGroups.find(b=>b.id==="_iframeSearch");f.addonIds=Object.keys(this.manifestsById).filter(b=>u.indexOf(b)===-1)}let a=0;for(const u of this.addonGroups)u.addonIds.forEach((f,b)=>{const E=this.addonListObjs.find(O=>O.manifest._addonId==="example"),w=E||{};w.duplicate=!!this.addonListObjs.find(O=>O.manifest._addonId===f),w.manifest=this.manifestsById[f],w.group=u,w.matchesSearch=!1;const I=w.manifest._categories[0]==="easterEgg"&&w.manifest._enabled===!1;w.matchesCategory=!I,w.naturalIndex=a,w.headerAbove=b===0,w.footerBelow=b===u.addonIds.length-1,E||this.addonListObjs.push(w),a++});this.addonListObjs=this.addonListObjs.filter(u=>u.manifest._addonId!=="example"),this.loaded=!0,setTimeout(()=>{const u=window.location.hash;if(u.startsWith("#addon-")){const f=u.substring(7),b=this.addonGroups.find(w=>w.addonIds.includes(f));if(!b)return;b.expanded=!0;const E=this.manifestsById[f];this.selectedCategory=E!=null&&E.tags.includes("easterEgg")?"easterEgg":"all",setTimeout(()=>{const w=document.getElementById("addon-"+f);w&&(w.scrollIntoView(),w.classList.add("addon-blink"),setTimeout(()=>w.classList.remove("addon-blink"),2001))},0)}},0);let c="";t.forEach(({addonId:u})=>c+=e[u]===!0?"1":"0");const m=BigInt(`0b${c}`).toString(36);this.sidebarUrls.feedback+=`#_${m}`})},computed:{themePath(){return this.theme?"../../images/icons/moon.svg":"../../images/icons/theme.svg"},addonList(){if(!this.searchInput)return this.addonListObjs.forEach(s=>{s.matchesSearch=s.group.id!=="_iframeSearch"}),this.addonListObjs.sort((s,o)=>s.naturalIndex-o.naturalIndex);if(!cn)return[];const t=Object.values(this.addonListObjs.reduce((s,o)=>((!s[o.manifest._addonId]||s[o.manifest._addonId]&&o.group.id!=="featuredNew"&&o.group.id!=="new")&&(s[o.manifest._addonId]=o),s),Object.create(null))),n=cn.search(this.searchInput).sort((s,o)=>s.score<.1^o.score<.1?s.score<.1?-1:1:o.item._enabled-s.item._enabled).map(s=>t.find(o=>o.manifest._addonId===s.item._addonId));for(const s of t)s.matchesSearch=n.includes(s);return t.sort((s,o)=>n.indexOf(s)-n.indexOf(o))},hasNoResults(){return!this.addonList.some(t=>t.matchesSearch&&t.matchesCategory)},version(){return chrome.runtime.getManifest().version},versionName(){return chrome.runtime.getManifest().version_name},addonAmt(){return`${Math.floor(this.manifests.filter(t=>!t.tags.includes("easterEgg")).length/5)*5}+`},selectedCategoryName(){var t;return(t=this.categories.find(e=>e.id===this.selectedCategory))==null?void 0:t.name}},setup(){const t=We(null);return(async()=>{const{theme:e,setGlobalTheme:n}=await Hs();t.value=e,os=n})(),{theme:t}},methods:{openMoreSettings:function(){this.closePickers(),this.moreSettingsOpen=!0,this.smallMode&&this.sidebarToggle()},sidebarToggle:function(){this.categoryOpen=!this.categoryOpen,this.categoryOpen?this.switchPath="../../images/icons/close.svg":this.switchPath="../../images/icons/switch.svg"},msg(t,...e){return chrome.i18n.getMessage(t,...e)},direction(){return uo(chrome.i18n.getUILanguage())},openReview(){typeof browser<"u"?window.open("https://addons.mozilla.org/en-US/firefox/addon/scratch-messaging-extension/reviews/"):window.open("https://chrome.google.com/webstore/detail/scratch-addons/fbeffbjdlemaoicjdapfpikkikjoneco/reviews")},clearSearch(){this.searchInputReal=""},setTheme(t){os(t),this.theme=t},stopPropagation(t){t.stopPropagation()},updateSettings(t,{wait:e=0,settingId:n=null}={}){const s=n&&this.addonSettings[t._addonId][n];setTimeout(()=>{(!n||this.addonSettings[t._addonId][n]===s)&&(chrome.runtime.sendMessage({changeAddonSettings:{addonId:t._addonId,newSettings:this.addonSettings[t._addonId]}}),console.log("Updated",this.addonSettings[t._addonId]))},e)},closePickers(t,e,{callCloseDropdowns:n=!0}={}){Pe.$emit("close-pickers",e),n&&this.closeResetDropdowns()},closeResetDropdowns(t,e){Pe.$emit("close-reset-dropdowns",e)},exportSettings(){Hn().then(t=>{const e=new Blob([t],{type:"application/json"});Xs("scratch-addons-settings.json",e)})},viewSettings(){const t=window.open("about:blank");Hn().then(e=>{const n=new Blob([e],{type:"text/plain"});t.location.replace(URL.createObjectURL(n))})},importSettings(){const t=Object.assign(document.createElement("input"),{hidden:!0,type:"file",accept:"application/json"});t.addEventListener("change",async e=>{const n=t.files[0];if(!n){t.remove(),alert(chrome.i18n.getMessage("fileNotSelected"));return}const s=await n.text();t.remove();const o=document.getElementById("confirmImport");try{await bo(s,this.manifests,o)}catch(i){console.warn("Error when importing settings:",i),o.classList.add("hidden-button"),alert(chrome.i18n.getMessage("importFailed"));return}alert(chrome.i18n.getMessage("importSuccess")),chrome.runtime.reload()},{once:!0}),document.body.appendChild(t),t.click()},applyLanguageSettings(){alert(chrome.i18n.getMessage("importSuccess")),chrome.runtime.reload()},openFullSettings(){window.open(`${chrome.runtime.getURL("webpages/dist/index.html")}#addon-${this.addonToEnable&&this.addonToEnable._addonId}`),setTimeout(()=>window.parent.close(),100)},hidePopup(){document.querySelector(".popup").style.animation="closePopup 0.6s 1",document.querySelector(".popup").addEventListener("animationend",()=>{this.showPopupModal=!1},{once:!0})},groupShownCount(t){return t.id==="_iframeSearch"?-1:this.addonListObjs.filter(e=>e.group===t&&e.matchesSearch&&e.matchesCategory).length},groupMarginAbove(t){const e=this.addonGroups.find(n=>this.groupShownCount(n)>0);return t!==e},closesidebar(t){(t==null?void 0:t.target.classList[0])!=="toggle"&&this.categoryOpen&&this.smallMode&&this.sidebarToggle()},resizeEvent(){window.innerWidth<1100?(this.smallMode=!0,this.categoryOpen=!1,this.switchPath="../../images/icons/switch.svg"):this.smallMode!==!1&&(this.smallMode=!1,this.categoryOpen=!0,this.switchPath="../../images/icons/close.svg")}},watch:{searchInputReal(t){if(t==="")return this.searchInput=t;setTimeout(()=>{this.searchInputReal===t&&(this.searchInput=t)},150)},selectedCategory(t){this.addonListObjs.forEach(e=>{const n=e.manifest._categories[0]==="easterEgg"&&t!=="easterEgg"&&e.manifest._wasEverEnabled===!1;e.matchesCategory=!n&&(t==="all"||e.manifest._categories.includes(t))}),t==="forums"&&(this.addonGroups.find(e=>e.id==="forums").expanded=!0)},forceEnglishSetting(t,e){e!==null&&chrome.storage.local.set({forceEnglish:this.forceEnglishSetting})}},mounted(){(Xe||typeof browser<"u")&&setTimeout(()=>{var o;return(o=document.getElementById("searchBox"))==null?void 0:o.focus()},0);const t={group:zn[0],manifest:JSON.parse(JSON.stringify(lo)),matchesSearch:!0,matchesCategory:!0,naturalIndex:-1,headerAbove:!1,footerBelow:!1,duplicate:!1};setTimeout(()=>{this.loaded||(this.addonListObjs=Array(25).fill("").map(()=>JSON.parse(JSON.stringify(t))))},0),chrome.storage.local.get("forceEnglish",({forceEnglish:o})=>{this.forceEnglishSettingInitial=o,this.forceEnglishSetting=o}),window.addEventListener("hashchange",o=>{const i=location.hash.replace(/^#addon-/,""),r=this.addonGroups.find(a=>a.addonIds.includes(i));if(!r)return;const d=this.manifestsById[i];r.expanded=!0,this.selectedCategory=d!=null&&d.tags.includes("easterEgg")?"easterEgg":"all",this.clearSearch(),setTimeout(()=>{var a;return(a=document.getElementById("addon-"+i))==null?void 0:a.scrollIntoView()},0)},{capture:!1}),window.addEventListener("resize",this.resizeEvent),this.resizeEvent(),document.title=chrome.i18n.getMessage("settingsTitle");let e=0;const n=["arrowup","arrowup","arrowdown","arrowdown","arrowleft","arrowright","arrowleft","arrowright","b","a"];let s=this;document.addEventListener("keydown",o=>{e=o.key.toLowerCase()===n[e]?e+1:0,e===n.length&&(s.selectedCategory="easterEgg",setTimeout(()=>vue.searchInputReal="",0))})}},bd={class:"navbar"},yd=["src"],wd=l("img",{src:Vs,class:"logo",alt:"Logo"},null,-1),_d=["src"],xd={class:"main"},Sd=["href"],kd=l("img",{src:ud},null,-1),Ed=l("img",{src:_n},null,-1),Md={class:"category category-small",href:"https://scratchaddons.com/translate",target:"_blank"},Cd=l("img",{src:Ps},null,-1),Id=l("img",{src:_n},null,-1),Td=["href"],Od=l("img",{src:hd},null,-1),Dd=l("img",{src:_n},null,-1),Ad=l("img",{src:gd},null,-1),$d={class:"addons-block"},Ld=["placeholder"],Pd={class:"search-button"},Nd={key:0,id:"search-not-found"},Fd={key:1,id:"search-not-found"},Rd={key:0,id:"iframe-fullscreen-suggestion"},jd={class:"addon-block settings-block"},Bd={class:"addon-body"},zd={class:"addon-topbar"},Ud={class:"addon-name"},Hd=l("img",{src:pd,class:"icon-type"},null,-1),Wd={class:"addon-settings"},Vd={class:"addon-description-full"},Gd={class:"addon-setting"},Xd={class:"filter-selector"},Yd={class:"filter-text"},Kd={class:"filter-options"},qd={class:"addon-body"},Jd={class:"addon-topbar"},Zd={class:"addon-name"},Qd={class:"addon-settings"},ec={class:"addon-description-full"},tc={class:"addon-description-full"},nc={class:"addon-setting"},sc={class:"filter-selector"},oc={class:"filter-selector"},ic={class:"large-button hidden-button",id:"confirmImport"},rc={class:"filter-selector",style:{"margin-left":"16px"}},ac={class:"addon-body"},lc={class:"addon-topbar"},dc={class:"addon-name"},cc=l("img",{src:Ps,class:"icon-type"},null,-1),uc={class:"addon-settings"},hc={class:"addon-setting",style:{"margin-top":"0"}},gc=l("span",null,"Show addon names and descriptions in English",-1),mc={class:"badge red"},pc={class:"footer"},fc=["href"],vc={href:"./licenses.html?libraries=icu-message-formatter,vue3,vite,vue-accessible-color-picker,comlink,Sora,fuse,idb,sortable,tiny-emitter",target:"_blank"},bc={class:"popup"},yc={class:"label"};function wc(t,e,n,s,o,i){const r=me("CategorySelector"),d=me("AddonGroupHeader"),a=me("AddonBody"),c=me("modal"),m=Lt("click-outside");return p(),v(z,null,[l("div",bd,[j(l("img",{src:o.switchPath,class:"toggle",onClick:e[0]||(e[0]=h=>i.sidebarToggle()),alt:"Logo"},null,8,yd),[[ee,o.smallMode]]),wd,l("h1",null,k(i.msg("settings")),1),l("img",{onClick:e[1]||(e[1]=h=>i.setTheme(!s.theme)),class:"theme-switch",src:i.themePath},null,8,_d)]),l("div",xd,[j((p(),v("div",{class:U(["categories-block",{smallMode:o.smallMode===!0}])},[(p(!0),v(z,null,X(o.categories,h=>(p(),we(r,{category:h},null,8,["category"]))),256)),l("a",{class:"category category-small",style:{"margin-top":"auto"},href:o.sidebarUrls.contributors,target:"_blank"},[kd,l("span",null,[de(k(i.msg("credits"))+" ",1),Ed])],8,Sd),l("a",Md,[Cd,l("span",null,[de(k(i.msg("translate"))+" ",1),Id])]),l("a",{class:"category category-small",href:o.sidebarUrls.feedback,target:"_blank"},[Od,l("span",null,[de(k(i.msg("feedback"))+" ",1),Dd])],8,Td),l("div",{class:"category",style:{"margin-top":"12px","margin-bottom":"14px"},onClick:e[2]||(e[2]=h=>i.openMoreSettings())},[Ad,l("span",null,k(i.msg("moreSettings")),1)])],2)),[[m,i.closesidebar],[ee,o.categoryOpen&&!o.isIframe]]),j(l("div",{class:"categories-shrink",onClick:e[3]||(e[3]=h=>i.sidebarToggle())},[l("img",{src:md,class:U({flipped:o.categoryOpen===(i.direction()==="rtl")})},null,2)],512),[[ee,!o.isIframe&&o.smallMode===!1]]),l("div",$d,[l("div",{class:U(["search-box",{smallMode:o.smallMode===!0}])},[j(l("input",{type:"text",id:"searchBox",placeholder:o.searchMsg,"onUpdate:modelValue":e[4]||(e[4]=h=>o.searchInputReal=h),autofocus:""},null,8,Ld),[[tt,o.searchInputReal]]),j(l("button",Pd,null,512),[[ee,o.searchInput===""]]),j(l("button",{class:"search-clear-button",onClick:e[5]||(e[5]=h=>i.clearSearch())},null,512),[[ee,o.searchInput!==""]])],2),l("div",{class:U(["addons-container",{placeholder:!o.loaded}])},[o.searchInput&&i.hasNoResults?(p(),v(z,{key:0},[o.selectedCategory==="all"||!i.selectedCategoryName?(p(),v("p",Nd,k(i.msg("searchNotFound")),1)):(p(),v("p",Fd,k(i.msg("searchNotFoundInCategory",i.selectedCategoryName)),1))],64)):$("",!0),(p(!0),v(z,null,X(i.addonList,h=>(p(),v(z,null,[o.isIframe&&h.headerAbove&&(i.hasNoResults||h.group.id==="enabled")?j((p(),v("div",Rd,[l("span",null,k(i.msg("exploreAllAddons",[i.addonAmt])),1),l("button",{class:"large-button",onClick:e[6]||(e[6]=g=>i.openFullSettings())},k(i.msg("openFullSettings")),1)],512)),[[ee,o.searchInput===""]]):$("",!0),h.headerAbove?(p(),we(d,{key:1,group:h.group,"shown-count":i.groupShownCount(h.group),"margin-above":i.groupMarginAbove(h.group)},null,8,["group","shown-count","margin-above"])):$("",!0),Pt(a,{visible:h.matchesSearch&&h.matchesCategory,addon:h.manifest,"group-id":h.group.id,"group-expanded":h.group.expanded},null,8,["visible","addon","group-id","group-expanded"])],64))),256))],2)])]),Pt(c,{class:"more-settings",modelValue:o.moreSettingsOpen,"onUpdate:modelValue":e[14]||(e[14]=h=>o.moreSettingsOpen=h),title:i.msg("moreSettings")},{default:Ws(()=>[l("div",jd,[l("div",Bd,[l("div",zd,[l("span",Ud,[Hd,de(" "+k(i.msg("scratchAddonsTheme")),1)])]),l("div",Wd,[l("span",Vd,k(i.msg("scratchAddonsThemeDescription")),1),l("div",Gd,[l("div",Xd,[l("div",Yd,k(i.msg("theme")),1),l("div",Kd,[l("div",{class:U(["filter-option",{sel:s.theme===!0}]),onClick:e[7]||(e[7]=h=>i.setTheme(!0))},k(i.msg("light")),3),l("div",{class:U(["filter-option",{sel:s.theme===!1}]),onClick:e[8]||(e[8]=h=>i.setTheme(!1))},k(i.msg("dark")),3)])])])])]),l("div",qd,[l("div",Jd,[l("span",Zd,[l("img",{src:fd,class:U(["icon-type",{dark:s.theme===!1}])},null,2),de(" "+k(i.msg("exportAndImportSettings")),1)])]),l("div",Qd,[l("span",ec,k(i.msg("exportAndImportSettingsDescription")),1),l("span",tc,k(i.msg("useBrowserSync")),1),l("div",nc,[l("div",sc,[l("button",{class:"large-button",onClick:e[9]||(e[9]=h=>i.exportSettings())},k(i.msg("export")),1)]),l("div",oc,[l("button",{class:"large-button",onClick:e[10]||(e[10]=h=>i.importSettings())},k(i.msg("import")),1),l("button",ic,k(i.msg("confirmImport")),1)]),l("div",rc,[l("button",{class:"large-button",onClick:e[11]||(e[11]=h=>i.viewSettings())},k(i.msg("viewSettings")),1)])])])]),l("div",ac,[l("div",lc,[l("span",dc,[cc,de(k(i.msg("language")),1)])]),l("div",uc,[l("div",hc,[j(l("input",{type:"checkbox",class:"setting-input check","onUpdate:modelValue":e[12]||(e[12]=h=>o.forceEnglishSetting=h),style:{"margin-inline-start":"0","margin-inline-end":"8px"}},null,512),[[as,o.forceEnglishSetting]]),gc,l("div",mc,k(i.msg("beta")),1),j(l("button",{class:"large-button",id:"applyLanguageSettingsButton",onClick:e[13]||(e[13]=h=>i.applyLanguageSettings()),style:{"margin-inline-start":"16px"}},k(i.msg("applySettings")),513),[[ee,o.forceEnglishSetting!==null&&o.forceEnglishSetting!==this.forceEnglishSettingInitial]])])])])]),l("div",pc,[l("p",null,[de(k(i.msg("extensionName"))+" ",1),l("a",{href:"https://scratchaddons.com/changelog",title:"{{ msg('changelog') }}",target:"_blank"}," v"+k(i.version),9,fc)]),l("p",null,[l("a",vc,k(i.msg("libraryCredits")),1)])])]),_:1},8,["modelValue","title"]),j(l("div",bc,[l("div",yc,k(i.msg("settingsPagePermission",o.addonToEnable?o.addonToEnable.name:"")),1),l("div",null,[l("button",{class:"large-button",onClick:e[15]||(e[15]=h=>i.openFullSettings())},k(i.msg("openFullSettings")),1),l("button",{class:"large-button",onClick:e[16]||(e[16]=h=>i.hidePopup())},k(i.msg("skipOpenFullSettings")),1)])],512),[[ee,o.showPopupModal]])],64)}const _c=fe(vd,[["render",wc]]),Fs=Gs(_c);Fs.directive("click-outside",{mounted:function(t,e,n){t.addEventListener("click",s=>s.stopPropagation()),t.addEventListener("click",s=>s.stopPropagation()),t.controlled=e.value.prevent,t.clickOutsideEvent=function(s){!(t==s.target||t.contains(s.target))&&!t.controlled&&e.value(s)},document.body.addEventListener("click",t.clickOutsideEvent)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}});Fs.mount("#app");
